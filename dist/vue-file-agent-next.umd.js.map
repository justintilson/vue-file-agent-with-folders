{"version":3,"file":"vue-file-agent-next.umd.js","sources":["../src/lib/extensions.ts","../src/lib/icons.ts","../src/components/VueFileIcon.vue","../src/lib/drop-handler.ts","../src/lib/utils.ts","../src/components/VueFilePreview.vue","../src/components/VueFileList.vue","../src/components/VueFileListItem.vue","../../../node_modules/.pnpm/vue-slicksort@2.0.5_vue@3.5.13_typescript@4.9.5_/node_modules/vue-slicksort/dist/vue-slicksort.esm.js","../src/lib/file-record.ts","../src/lib/ajax-request.ts","../src/lib/upload-helper.ts","../src/lib/plugins.ts","../src/components/VueFileAgent.vue","../src/components/index.ts","../src/VueFileAgent.ts"],"sourcesContent":["const c = {\n  'audio': [\n    'aif',\n    'cda',\n    'mid',\n    'midi',\n    // 'mp3',\n    'mpa',\n    // 'ogg',\n    // 'wav',\n    'wma',\n    'wpl',\n  ],\n  'audio-playable': ['mp3', 'ogg', 'wav'],\n  'archive': ['7z', 'arj', 'deb', 'pkg', 'rar', 'rpm', 'tar.gz', 'z', 'zip'],\n  'disc': [\n    // 'bin',\n    'dmg',\n    'iso',\n    'toast',\n    'vcd',\n  ],\n  'database': [\n    'csv',\n    'dat',\n    'db',\n    'dbf',\n    'log',\n    'mdb',\n    'sav',\n    'sql',\n    'tar',\n    // 'xml'\n  ],\n  'executable': ['apk', 'bat', 'bin', 'cgi', 'pl', 'com', 'exe', 'gadget', 'jar', 'py', 'wsf', 'ipa'],\n  'font': ['fnt', 'fon', 'otf', 'ttf'],\n  'image': ['ai', 'bmp', 'gif', 'ico', 'jpeg', 'jpg', 'png', 'ps', 'psd', 'svg', 'tif', 'tiff'],\n  'markup': [\n    'asp',\n    'aspx',\n    'cer',\n    'cfm',\n    'cgi',\n    'pl',\n    'css',\n    'scss',\n    'htm',\n    'html',\n    'jsp',\n    // 'vue',\n    'part',\n    'php',\n    'py',\n    'rss',\n    'xml',\n    'xhtml',\n  ],\n  'presentation': ['key', 'odp', 'pps', 'ppt', 'pptx'],\n  'script': ['c', 'class', 'cpp', 'cs', 'h', 'java', 'js', 'json', 'sh', 'swift', 'vb'],\n  'sheet': ['ods', 'xlr', 'xls', 'xlsx'],\n  'system': [\n    'bak',\n    'cab',\n    'cfg',\n    'cpl',\n    'cur',\n    'dll',\n    'dmp',\n    'drv',\n    'icns',\n    // 'ico',\n    'ini',\n    'lnk',\n    'msi',\n    'sys',\n    'tmp',\n  ],\n  'video': [\n    '3g2',\n    '3gp',\n    'avi',\n    'flv',\n    'h264',\n    // 'm4v',\n    'mkv',\n    // 'mov',\n    // 'mp4',\n    'mpg',\n    'mpeg',\n    'rm',\n    'swf',\n    'vob',\n    // 'webm',\n    'wmv',\n  ],\n  'video-playable': ['mp4', 'webm', 'mov'],\n  'vue': ['vue'],\n  'doc': [\n    'doc',\n    'docx',\n    'odt',\n    'rtf',\n    'tex',\n    // 'txt',\n    'wks',\n    'wps',\n    'wpd',\n  ],\n  'text': ['txt'],\n  'ebook': ['epub'],\n  'pdf': ['pdf'],\n  'folder': ['folder'],\n  'play': ['play'],\n};\n\nexport default c;\n","import extensions from '../lib/extensions';\n\nexport class SvgIcon {\n  public category: string = '';\n  constructor(public paths: string[], public color?: string, public viewBox?: string) {}\n}\n\nconst playIconPaths = ['M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm-4 29V15l12 9-12 9z'];\n\nconst icons = {\n  'folder': new SvgIcon(\n    [\n      'M96.5 93.7h-93c-2 0-3.5-1.5-3.5-3.5V35.4h100v54.8c0 2-1.5 3.5-3.5 3.5z',\n      'M44.9 20V9.7c0-2-1.5-3.5-3.5-3.5h-38C1.5 6.3 0 7.8 0 9.7v25.7h100V23.5c0-2-1.5-3.5-3.5-3.5H44.9z',\n    ],\n    '#efce4a'\n  ),\n  'audio': new SvgIcon(\n    [\n      'M32.5 37.5h-9v25h9L53.6 77V23L32.5 37.5M71.9 50c0 6.8-3.7 12.7-9.1 15.8l2.8 4.9c7.1-4.1 11.9-11.8 11.9-20.7 0-8.8-4.8-16.6-11.9-20.7l-2.8 4.9c5.4 3.1 9.1 9 9.1 15.8z',\n      // tslint:disable-next-line\n      'M62.1 50c0 3.2-1.7 5.9-4.3 7.4l2.7 4.7c4.2-2.4 7-6.9 7-12.1 0-5.2-2.8-9.7-7-12.1l-2.7 4.7c2.6 1.5 4.3 4.2 4.3 7.4z',\n    ],\n    '#039'\n  ),\n  'video': new SvgIcon(\n    [\n      'M21 26.4v47.1h58V26.4H21zm10.9 43.5h-7.2v-7.2h7.2v7.2zm0-10.8h-7.2v-7.2h7.2v7.2zm0-10.9h-7.2V41h7.2v7.2zm0-10.9h-7.2v-7.2h7.2v7.2zm10.9 25.4V37.3L60.9 50 42.8 62.7zm32.6 7.2h-7.2v-7.2h7.2v7.2zm0-10.8h-7.2v-7.2h7.2v7.2zm0-10.9h-7.2V41h7.2v7.2zm0-10.9h-7.2v-7.2h7.2v7.2z',\n    ],\n    '#ef6f2e'\n  ),\n  'audio-playable': new SvgIcon(playIconPaths, '#039', '0 0 48 48'),\n  'video-playable': new SvgIcon(playIconPaths, '#ef6f2e', '0 0 48 48'),\n  'archive': new SvgIcon(\n    [\n      'M72.4 38.5h-7.9v-7.9l7.9 7.9zm-21.3-7.9v28.8h21.4v-19h-9.9v-9.9H51.1zm3.3-7.6H30.8v5.6h9.3l-5.9 4.5v4.8l8.6-6.6v-2.7h30.1v-2.3L54.4 23zM42.9 35.1l-8.6 6.6v4.8l8.6-6.6v-4.8zm-8.7 20l8.6-6.6v-4.8l-8.6 6.6v4.8zm8.7 2v-4.8l-8.6 6.6v2.6h-3.4v5.6h5.3v3.8H33c-.6-1-1.6-1.6-2.8-1.6-1.8 0-3.2 1.4-3.2 3.2s1.4 3.2 3.2 3.2c1.2 0 2.2-.6 2.8-1.6h3.1V77h4.8v-2.9H44c.6 1 1.6 1.6 2.8 1.6 1.8 0 3.2-1.4 3.2-3.2s-1.4-3.2-3.2-3.2c-1.2 0-2.2.6-2.8 1.6h-3.1v-3.8h13.5l18.5-3.3v-2.3H37.1l5.8-4.4z',\n    ],\n    '#ba8322'\n  ),\n  'system': new SvgIcon(\n    [\n      'M73.6 54.8c-2.1-.7-3.4-2.6-3.4-4.8s1.4-4.1 3.4-4.8c.6-.2 1-.9.8-1.5-.6-2.3-1.5-4.4-2.7-6.5-.3-.6-1.1-.8-1.7-.5-.7.4-1.6.6-2.4.6-2.8 0-5-2.3-5-5 0-.8.2-1.7.6-2.4.3-.6.1-1.3-.5-1.7-2-1.2-4.2-2.1-6.5-2.7-.6-.2-1.3.2-1.5.8-.7 2.1-2.6 3.4-4.8 3.4-2.2 0-4.1-1.4-4.8-3.4-.2-.6-.9-1-1.5-.8-2.3.6-4.4 1.5-6.5 2.7-.6.3-.8 1.1-.5 1.7.4.7.6 1.6.6 2.4 0 2.8-2.3 5-5 5-.8 0-1.7-.2-2.4-.6-.6-.3-1.3-.1-1.7.5-1.2 2-2.1 4.2-2.7 6.5-.2.6.2 1.3.8 1.5 2.1.7 3.4 2.6 3.4 4.8s-1.4 4.1-3.4 4.8c-.6.2-1 .9-.8 1.5.6 2.3 1.5 4.4 2.7 6.5.3.6 1.1.8 1.7.5.7-.4 1.6-.6 2.4-.6 2.8 0 5 2.3 5 5 0 .8-.2 1.7-.6 2.4-.3.6-.1 1.3.5 1.7 2 1.2 4.2 2.1 6.5 2.7h.3c.5 0 1-.3 1.2-.9.7-2.1 2.6-3.4 4.8-3.4 2.2 0 4.1 1.4 4.8 3.4.2.6.9 1 1.5.8 2.3-.6 4.4-1.5 6.5-2.7.6-.3.8-1.1.5-1.7-.4-.7-.6-1.6-.6-2.4 0-2.8 2.3-5 5-5 .8 0 1.7.2 2.4.6.6.3 1.3.1 1.7-.5 1.2-2 2.1-4.2 2.7-6.5.2-.5-.1-1.2-.8-1.4zM50 57.6c-4.2 0-7.6-3.4-7.6-7.6 0-4.2 3.4-7.6 7.6-7.6 4.2 0 7.6 3.4 7.6 7.6 0 4.2-3.4 7.6-7.6 7.6z',\n    ],\n    '#999'\n  ),\n  'image': new SvgIcon(\n    [\n      'm 40.400002,35 a 8,8 0 0 1 -8,8 8,8 0 0 1 -8,-8 8,8 0 0 1 8,-8 8,8 0 0 1 8,8 z',\n      'M78.9 47.3l-9.7-9.6L50 57l-9.6-9.7-19.3 19.3V73h57.8z',\n    ],\n    '#5b2d8d'\n  ),\n  'doc': new SvgIcon(\n    [\n      'M29.6 53l-5.9-18.2c-.2-.7-.4-1-.5-1-.1-.1-.2-.1-.4-.2l-2.1-.6-.1-2.6h11l.2 2.6-2.1.6v.2c0 .2.1.7.4 1.2l2.2 7 3.9-11.7 3-.1 3.6 11.7 2.5-7c.1-.5.4-1 .4-1.2v-.1l-1.8-.5-.1-2.7h8.6l.2 2.6-2.3.7c-.1 0-.2.1-.4.1 0 .1-.2.2-.4.9L43 52.8l-3.1.2-3.3-11.2-3.9 11-3.1.2z',\n      'M57.8 30.2h21.7v3.4H57.8zm0 9.2h21.7v3.4H57.8zm0 9.4h21.7v3.4H57.8zm-36.2 9.6h57.9v3.4H21.6zm0 9.4h57.9v3.4H21.6z',\n    ],\n    '#2372ba'\n  ),\n  'executable': new SvgIcon(\n    ['M33.1 29.8l-6.6 6.6L37.2 47 26.5 57.6l6.6 6.6L50.2 47zm18.8 31.1h22.6v9.2H51.9z'],\n    '#333'\n  ),\n  'ebook': new SvgIcon(\n    [\n      'M75.8 45.7c-.3-.6-.7-1.2-1.3-1.6-.1.5-.3 1-.6 1.5L58.3 69.8c-.6.9-1.9 1.1-2.9.8l-25-7c-1.5-.4-3.3-1.3-3.4-3 0-.6 0-.9.4-1.1.3-.3.8-.2 1.1-.1L52 66c3.4 1 4.4.2 6.9-3.5l14.4-22.2c.7-1.2.9-2.5.5-3.6s-1.4-2-2.7-2.4l-20.6-5.7c-.5-.1-1-.1-1.5-.1v-.1c-3.2-1.9-4.4 1.7-6 3-.6.5-1.4.8-1.7 1.3-.2.5-.1 1-.3 1.4-.6 1.4-2.4 3.6-3.3 4.3-.6.4-1.2.5-1.6 1.1-.3.4-.2 1.1-.4 1.6-.5 1.2-2.1 3.3-3.2 4.4-.4.4-1 .6-1.3 1.1-.3.4-.2 1.1-.4 1.6-.7 1.3-2.2 3.2-3.4 4.3-.6.6-1.3.9-1.6 1.5-.1.3 0 .7-.2 1.1-.2.6-.5 1.1-.7 1.7-.7.9-1 2.1-.9 3.4.2 3.1 2.5 6 5.3 6.8l25 7c2.3.6 5.2-.5 6.6-2.5l14.4-22.2c.7-1.1.9-2.4.5-3.6zm-28.9-7.9l1.1-1.6c.3-.4.9-.7 1.4-.5l16.5 4.6c.5.1.7.6.4 1l-1.1 1.6c-.3.4-.9.7-1.4.5l-16.5-4.6c-.5-.2-.7-.6-.4-1zM42.7 44l1.1-1.6c.3-.4.9-.7 1.4-.5l16.5 4.6c.5.1.7.6.4 1L60.9 49c-.3.4-.9.7-1.4.5L43.1 45c-.5-.1-.7-.6-.4-1z',\n    ],\n    '#963'\n  ),\n  'markup': new SvgIcon(\n    [\n      'M21.5 48.3l16.2-14v7.1l-11 9.2v.1l11 9.2V67L21.5 53v-4.7zm30.6-17.6h4.3L48 71.3h-4.2l8.3-40.6zM62.3 60l11-9.2v-.1l-11-9.2v-7.1l16.2 14v4.9l-16.2 14V60z',\n    ] /* no color? */\n  ),\n  'script': new SvgIcon(\n    [\n      'M42.3 44.2h15.4V48H42.3v-3.8zm0 7.7h15.4v3.8H42.3v-3.8zm0 7.7h15.4v3.8H42.3v-3.8zM69.2 25H38.5c-4.2 0-7.7 3.4-7.7 7.7v34.6h-7.7c0 4.2 3.4 7.7 7.7 7.7h30.8c4.2 0 7.7-3.4 7.7-7.7V36.5H77v-3.8c-.1-4.3-3.5-7.7-7.8-7.7zm-3.8 41.6c0 2.5-2 4.5-4.5 4.5H32.7c1.9-1.3 1.9-3.8 1.9-3.8V32.7c0-2.1 1.7-3.8 3.8-3.8s3.8 1.7 3.8 3.8v3.8h23.1v30.1zM46.2 32.7v-3.8h23.1c3.5 0 3.8 2.2 3.8 3.8H46.2z',\n    ] /* no color? */\n  ),\n  'disc': new SvgIcon(\n    [\n      'M46.9 50c0 .8.3 1.6.9 2.2 1.2 1.2 3.2 1.2 4.4 0 .6-.6.9-1.4.9-2.2 0-.8-.3-1.6-.9-2.2-.6-.6-1.4-.9-2.2-.9-.8 0-1.6.3-2.2.9-.6.6-.9 1.4-.9 2.2z',\n      'M32.3 32.3c-9.8 9.8-9.8 25.6 0 35.4 9.8 9.8 25.6 9.8 35.4 0 9.8-9.8 9.8-25.6 0-35.4-9.8-9.7-25.6-9.7-35.4 0zm37 28.2c-.9 1.7-2.1 3.2-3.5 4.6-1.4 1.4-3 2.6-4.6 3.5l-5.8-11.1s.5-.2 1.6-1.2c1.1-1.1 1.3-1.6 1.3-1.6l11 5.8zM54.4 45.6c1.2 1.2 1.8 2.8 1.8 4.4 0 1.6-.6 3.2-1.8 4.4-2.4 2.4-6.4 2.4-8.8 0-1.2-1.2-1.8-2.8-1.8-4.4 0-1.6.6-3.2 1.8-4.4a6.1 6.1 0 0 1 8.8 0zm-8.5-4.4s-1.2.7-2.2 1.8c-.9 1-1 1.2-1.3 1.7l-11-5.9c.9-1.7 2.1-3.2 3.5-4.6 1.4-1.4 3-2.6 4.6-3.5l6.4 10.5z',\n    ],\n    '#c96'\n  ),\n  'text': new SvgIcon(\n    ['M69.4 28.6v5.5H21.5v-5.5M30.6 41h47.9v5.6H30.6zm-9.1 12.4h47.9V59H21.5zm9.1 12.5h47.9v5.6H30.6z'],\n    '#6b533b'\n  ),\n  'database': new SvgIcon(\n    [\n      'M48.1 75.5c-6.5-.3-12.3-2.3-15.4-5.4-.9-.9-1.8-2.1-2.2-2.9l-.3-.5v-6.1c0-6 0-6.1.1-5.6.3 1.3 1.1 2.7 2.3 3.7.8.7 2.5 1.8 3.8 2.5 2.4 1.2 5.2 2 8.4 2.5 1.9.3 2.6.3 5.3.3s3.4 0 5.3-.3c3.1-.5 6-1.3 8.3-2.5 1.4-.7 3-1.7 3.8-2.5 1.1-1 2-2.5 2.3-3.8.1-.5.1-.4.1 5.5v6l-.3.6c-1 1.9-2.6 3.6-4.7 4.8-4.3 2.7-10.5 4-16.8 3.7z',\n      'M48.1 60.4c-5.7-.3-11-1.9-14.3-4.4-.7-.6-1.8-1.6-2.3-2.2-.4-.6-.8-1.2-1.1-1.8l-.3-.5v-6c0-5.9 0-6 .1-5.5.2.9.7 2 1.5 2.9.4.5 1.1 1.2 1.5 1.4.1.1.5.3.7.5 2.7 1.9 6.5 3.3 10.8 3.9 1.9.3 2.6.3 5.3.3s3.4 0 5.3-.3c3.1-.5 6-1.3 8.4-2.5 1.4-.7 3-1.8 3.9-2.5 1.1-1 2-2.4 2.2-3.7.1-.5.1-.4.1 5.5v5.9l-.4.8c-.7 1.2-1.1 1.8-1.9 2.7-.8.8-1.6 1.5-2.7 2.1-4.3 2.4-10.5 3.7-16.8 3.4z',\n      'M47.7 45.4c-3.8-.3-6.8-.9-9.6-2-3.4-1.3-5.8-3.1-7.1-5.2-.3-.4-.5-1-.7-1.6-.2-.6-.3-2-.1-2.7.9-4.3 6.6-7.9 14.5-9 1.9-.3 2.6-.3 5.3-.3s3.4 0 5.3.3c3.1.5 6 1.3 8.4 2.5 3.5 1.7 5.6 4 6.1 6.5.1.7.1 2.1-.1 2.7-.4 1.3-1 2.2-2 3.2-2.8 2.9-7.9 4.9-14.1 5.6-.9-.1-5.1 0-5.9 0z',\n    ],\n    '#a03537'\n  ),\n  'pdf': new SvgIcon(\n    [\n      'M46.2 21.8c-3.5 0-6.3 2.9-6.3 6.3 0 4.3 2.4 9.6 4.9 14.7-2 6.1-4.1 12.7-7 18.2-5.8 2.3-11 4-14 6.6l-.2.2c-1.1 1.2-1.8 2.7-1.8 4.4 0 3.5 2.9 6.3 6.3 6.3 1.7 0 3.4-.6 4.4-1.8 0 0 .2 0 .2-.2 2.3-2.7 5-7.8 7.5-12.2 5.5-2.1 11.5-4.4 16.9-5.8 4.1 3.4 10.1 5.5 15 5.5 3.5 0 6.3-2.9 6.3-6.3 0-3.5-2.9-6.3-6.3-6.3-4 0-9.6 1.4-13.9 2.9-3.5-3.4-6.7-7.5-9.2-11.9C50.6 37 52.6 32 52.6 28c-.2-3.5-2.9-6.2-6.4-6.2zm0 3.6c1.4 0 2.4 1.1 2.4 2.4 0 1.8-1.1 5.3-2.1 9-1.5-3.7-2.9-7.2-2.9-9 .1-1.2 1.2-2.4 2.6-2.4zm1.1 21.5c1.8 3.1 4.1 5.8 6.6 8.2-3.7 1.1-7.3 2.3-11 3.7 1.8-3.8 3.1-7.9 4.4-11.9zM72 55c1.4 0 2.4 1.1 2.4 2.4 0 1.4-1.1 2.4-2.4 2.4-2.9 0-6.9-1.2-10.1-3.1C65.6 56 69.7 55 72 55zM34.6 66.2c-1.8 3.2-3.5 6.1-4.7 7.6-.5.5-.9.6-1.7.6-1.4 0-2.4-1.1-2.4-2.4 0-.6.3-1.4.6-1.7 1.3-1.2 4.5-2.6 8.2-4.1z',\n    ],\n    '#c11e07'\n  ),\n  'sheet': new SvgIcon(\n    [\n      'M62.1 30.9h14.1v9.4H62.1zm0 14.5h14.1v9.4H62.1zm0 14.3h14.1v9.4H62.1zm-19.2 0H57v9.4H42.9zm-19 0H38v9.4H23.9zm19.2-14.2h14.1v9.4H43.1zm-19.2 0H38v9.4H23.9zm19.2-14.6h14.1v9.4H43.1zm-19.2 0H38v9.4H23.9z',\n    ],\n    '#30723f'\n  ),\n  'presentation': new SvgIcon(\n    [\n      'M 73.319289,26.32707 H 26.61477 c -2.335226,0 -4.258353,1.917194 -4.258353,4.245215 v 29.853446 c 0,2.328021 1.923127,4.245215 4.258353,4.245215 h 19.506006 l -1.923128,7.257947 h -2.197859 c -0.961564,0 -1.648395,0.684712 -1.648395,1.643309 0,0.958597 0.686831,1.643309 1.648395,1.643309 h 15.797117 c 0.961563,0 1.648394,-0.684712 1.648394,-1.643309 0,-0.958597 -0.686831,-1.643309 -1.648394,-1.643309 H 55.46168 l -1.923128,-7.39489 h 19.780737 c 2.335226,0 4.258353,-1.917193 4.258353,-4.245214 V 30.572285 c 0,-2.328021 -1.923127,-4.245215 -4.258353,-4.245215 z m 0.412099,34.372546 H 26.202672 V 30.2984 h 47.39135 z',\n      'm 38.428266,48.511741 h 3.846255 v 7.668775 h -3.846255 z m 6.456214,-2.464963 h 3.846254 V 56.180516 H 44.88448 Z m 6.318846,-2.601906 h 3.846255 v 12.735644 h -3.846255 z m 6.318847,-2.464964 h 3.846255 v 15.200608 h -3.846255 z m -0.274732,-5.614639 -6.730946,3.697445 -4.945184,-1.643308 -8.379341,4.519099 1.236296,1.369424 7.417777,-3.834387 4.945185,1.643309 7.692509,-4.245215 1.236296,1.369424 2.88469,-4.792984 -6.593578,0.410827 z',\n    ],\n    '#c24f32'\n  ),\n  'font': new SvgIcon(\n    [\n      'M40.4 56.2H28.7l-1.4 3.1c-.5 1-.7 1.9-.7 2.6 0 .9.4 1.6 1.1 2 .4.3 1.5.4 3.2.6v.9H20v-.9c1.2-.2 2.2-.6 2.9-1.4.8-.8 1.7-2.4 2.8-4.8l11.8-25.6h.5l12 26.2c1.1 2.5 2.1 4.1 2.8 4.7.6.5 1.3.8 2.3.9v.9h-16v-.9h.7c1.3 0 2.2-.2 2.7-.5.4-.3.5-.6.5-1.1 0-.3 0-.6-.1-.9 0-.1-.3-.7-.7-1.8l-1.8-4zm-.8-1.8l-4.9-11-5.1 11h10z',\n      'M80 44.2l-4.7 15.7-.5 1.9c0 .2-.1.4-.1.5 0 .2.1.4.2.5.1.2.3.2.4.2.3 0 .8-.3 1.4-.8.2-.2.8-.9 1.8-2.2l.9.4c-1.2 2-2.4 3.5-3.7 4.5-1.3.9-2.7 1.4-4.2 1.4-.9 0-1.6-.2-2.1-.7-.5-.5-.7-1-.7-1.8 0-.6.3-1.8.8-3.4l.6-1.9c-1.9 3.1-3.7 5.4-5.4 6.7-1 .8-2.1 1.1-3.2 1.1-1.5 0-2.6-.6-3.2-1.8-.7-1.2-1-2.5-1-4 0-2.2.7-4.8 2.1-7.6 1.4-2.9 3.2-5.2 5.5-6.9 1.9-1.4 3.6-2.2 5.3-2.2.9 0 1.6.3 2.2.8.6.5 1 1.4 1.2 2.8l.9-2.9 5.5-.3zm-7.8 4.5c0-1.3-.2-2.2-.6-2.8-.3-.4-.7-.6-1.2-.6s-1 .2-1.6.7c-1.1 1-2.3 3-3.5 5.9-1.3 3-1.9 5.6-1.9 7.7 0 .8.1 1.4.4 1.8.3.4.6.6.9.6.7 0 1.5-.4 2.2-1.2 1.1-1.2 2-2.6 2.9-4.3 1.6-2.9 2.4-5.5 2.4-7.8z',\n    ],\n    '#7291a1'\n  ),\n  'vue': new SvgIcon(\n    [\n      'M 66.425365,28.281905 H 56.751974 L 49.707631,39.427061 43.669624,28.281905 H 21.530262 L 49.707631,76.54823 77.885006,28.281905 Z m -37.888497,4.025337 h 6.767604 L 49.707631,57.239179 64.098226,32.307242 h 6.767597 L 49.707631,68.560446 Z',\n    ],\n    '#41B883'\n  ),\n  'other': new SvgIcon(\n    [\n      'M71 36.3L57.8 23.1c-.4-.4-.9-.6-1.4-.6h-26c-1.1 0-2 .9-2 2v51.1c0 1.1.9 2 2 2h39.3c1.1 0 2-.9 2-2V37.7c-.1-.5-.3-1-.7-1.4zm-3.9 2.3H55.5V27l11.6 11.6zm.1 34.5H32.8V26.9h18.5v13.3c0 1.4 1.2 2.6 2.6 2.6h13.3v30.3z',\n    ] /* no color? */\n  ),\n  // system icons\n  'system-close': new SvgIcon(\n    ['M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'],\n    undefined,\n    '0 0 24 24'\n  ),\n  'system-file-preview-new': new SvgIcon(\n    [\n      'M745,353c-5.6,0-11.3,0.2-17.2,0.7C687.4,237.3,577.8,157,451,157c-162.1,0-294,131.9-294,294c0,2.1,0,4.1,0,6.2C72.6,479,10,555.8,10,647c0,108.1,87.9,196,196,196h245V618.3l-63.4,63.4c-9.6,9.6-22.1,14.4-34.6,14.4s-25.1-4.8-34.6-14.4c-19.2-19.2-19.2-50.1,0-69.3l147-147c4.6-4.6,9.9-8.1,16-10.6c12-4.9,25.5-4.9,37.4,0c6,2.5,11.4,6.1,16,10.6l147,147c19.2,19.2,19.2,50.1,0,69.3c-9.6,9.6-22.1,14.4-34.6,14.4s-25.1-4.8-34.6-14.4L549,618.3V843h196c135.1,0,245-109.9,245-245S880.1,353,745,353z',\n    ],\n    undefined,\n    '0 0 1000 1000'\n  ),\n  // system icons\n  'system-sortable-handle': new SvgIcon(['M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z'], undefined, '0 0 24 24'),\n  'system-file-av-play': new SvgIcon(\n    ['M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm-4 29V15l12 9-12 9z'],\n    undefined,\n    '0 0 48 48'\n  ),\n  // M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm-4 29V15l12 9-12 9z\n  'system-file-name-edit': new SvgIcon(\n    [\n      'M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z',\n    ],\n    undefined,\n    '0 0 24 24'\n  ),\n};\n\nfor (const category in icons) {\n  if (icons.hasOwnProperty(category)) {\n    (icons as any)[category].category = category;\n  }\n}\n\nexport default icons;\n\nexport const extensionsMap: any = {};\n\nfor (const cat in extensions) {\n  if (extensions.hasOwnProperty(cat)) {\n    for (const ext of (extensions as any)[cat]) {\n      extensionsMap[ext] = cat;\n    }\n  }\n}\n\nexport function getIconByName(name: string): SvgIcon {\n  const svgIcon = (icons as any)[name] || icons.other;\n  return svgIcon;\n}\n\nexport function getIconFromExt(ext: string): SvgIcon {\n  ext = ext.toLowerCase();\n  const cat = extensionsMap[ext];\n  return getIconByName(cat);\n}\n","<template>\n  <svg :viewBox=\"viewBoxComputed\">\n    <template v-for=\"(d, index) in icon.paths\">\n      <path v-if=\"d\" :key=\"index\" :d=\"d\" />\n    </template>\n  </svg>\n</template>\n<script lang=\"ts\">\nimport {getIconByName, getIconFromExt, SvgIcon} from '../lib/icons'\nimport {defineComponent} from 'vue'\n\nexport default /* #__PURE__ */ defineComponent({\n  name: 'VueFileIcon',\n  props: {\n    ext: {type: String, required: false},\n    name: {type: String, required: false},\n    viewBox: {type: String, required: false},\n  },\n  computed: {\n    viewBoxComputed(): string {\n      if (!this.viewBox && this.icon && this.icon.viewBox) {\n        return this.icon.viewBox\n      }\n      return this.viewBox ? this.viewBox : '0 0 100 100'\n    },\n    icon(): SvgIcon {\n      if (this.name) {\n        return getIconByName(this.name)\n      }\n      const svgIcon = getIconFromExt(this.ext ? this.ext : '')\n      return svgIcon\n    },\n  },\n})\n</script>\n<style></style>\n","import {FileAgentFile} from './interfaces'\n\nexport function getFilesFromDroppedItems(\n  dataTransfer: DataTransfer\n): Promise<FileAgentFile[] | FileList> {\n  return new Promise((resolve) => {\n    if (!includesFolder(dataTransfer)) {\n      return resolve(dataTransfer.files)\n    }\n\n    const files: FileAgentFile[] = []\n    const folderReadQueue = []\n    // tslint:disable-next-line\n    for (let i = 0; i < dataTransfer.items.length; i++) {\n      const item = dataTransfer.items[i]\n      if (item.kind !== 'file') {\n        continue\n      }\n      const fileSystemEntries = getEntries(item)\n      if (fileSystemEntries) {\n        folderReadQueue.push(fileSystemEntries)\n      } else {\n        const file = item.getAsFile()\n        if (file) {\n          files.push(file as FileAgentFile)\n        }\n      }\n    }\n    Promise.all(folderReadQueue).then((filesInFolders) => {\n      resolve(files.concat(...filesInFolders))\n    })\n  })\n}\n\nfunction getEntries(entry: any): Promise<FileAgentFile[]> | undefined {\n  // convert DataTransferItem to FileSystemEntry first if necessary\n  if (entry.getAsEntry) {\n    return getEntries(entry.getAsEntry())\n  }\n  if (entry.webkitGetAsEntry) {\n    return getEntries(entry.webkitGetAsEntry())\n  }\n  // return if item is from a browser that does not support webkitGetAsEntry\n  if (entry.getAsFile) {\n    return\n  }\n  // Processing directories with more than 100 files:\n  // https://github.com/lian-yue/vue-upload-component/commit/9c9d8aafbcef005a2cc598454383ec65205d61ee\n  return new Promise((resolve) => {\n    let directory = ''\n\n    if (entry.isFile) {\n      entry.file((file: File) => resolve([file as FileAgentFile]))\n      return\n    }\n    if (entry.isDirectory) {\n      directory = entry.fullPath\n\n      const files: FileAgentFile[] = []\n      const entryReader = entry.createReader()\n      const readEntries = () => {\n        entryReader.readEntries((entries: any[]) => {\n          const iterateEntry = (i: number) => {\n            if (!entries[i] && i === 0) {\n              return resolve(files as FileAgentFile[])\n            }\n            if (!entries[i]) {\n              return readEntries()\n            }\n            ;(getEntries(entries[i]) as Promise<FileAgentFile[]>).then(\n              (entryFiles: FileAgentFile[]) => {\n                for (const entryFile of entryFiles) {\n                  if (!entryFile.fullPath) {\n                    entryFile.fullPath = directory\n                  }\n                }\n                files.push(...entryFiles)\n\n                iterateEntry(i + 1)\n              }\n            )\n          }\n          iterateEntry(0)\n        })\n      }\n      readEntries()\n    }\n    if (!entry.isFile && !entry.isDirectory) {\n      resolve([])\n    }\n  })\n}\n\nfunction includesFolder(transfer: DataTransfer): boolean {\n  if (!transfer.files.length) {\n    return true // if dropping only folders, no files will exist\n  }\n\n  // Loop through the dropped items and log their data\n  for (const item of transfer.items) {\n    if (item.webkitGetAsEntry != null) {\n      const entry = item.webkitGetAsEntry()\n\n      if (entry && entry.isDirectory) {\n        return true\n      }\n    }\n  }\n\n  const files: FileList = transfer.files\n\n  // tslint:disable-next-line\n  for (let i = 0; i < files.length; i++) {\n    // A folder has no type and has a size that is a multiple of 4096\n    if (!files[i].type && files[i].size % 4096 === 0) {\n      return true\n    }\n  }\n  return false\n}\n","import { getFilesFromDroppedItems } from './drop-handler';\n\nexport type RGBA = [number, number, number, number];\nexport interface VideoThumbnail {\n  url: string;\n  color?: RGBA;\n  width: number;\n  height: number;\n}\nexport interface ImageThumbnail {\n  image: HTMLImageElement;\n  url: string;\n  color?: RGBA;\n}\n\nenum ImageOrientation {\n  NORMAL = 1,\n  UPSIDE_DOWN = 6,\n}\n\nclass Utils {\n  public arrayMove(arr: any[], previousIndex: number, newIndex: number): any[] {\n    // https://github.com/Jexordexan/vue-slicksort/blob/master/src/utils.js\n    const array = arr.slice(0);\n    if (newIndex >= array.length) {\n      let k = newIndex - array.length;\n      while (k-- + 1) {\n        array.push(undefined);\n      }\n    }\n    array.splice(newIndex, 0, array.splice(previousIndex, 1)[0]);\n    return array;\n  }\n\n  public getAverageColor(arr: Uint8ClampedArray): RGBA | undefined {\n    const bytesPerPixel = 4;\n    const arrLength = arr.length;\n    if (arrLength < bytesPerPixel) {\n      return;\n    }\n    const step = 5;\n    const len = arrLength - (arrLength % bytesPerPixel);\n    const preparedStep = (step || 1) * bytesPerPixel;\n\n    let redTotal = 0;\n    let greenTotal = 0;\n    let blueTotal = 0;\n    let alphaTotal = 0;\n    let count = 0;\n\n    for (let i = 0; i < len; i += preparedStep) {\n      const alpha = arr[i + 3];\n      const red = arr[i] * alpha;\n      const green = arr[i + 1] * alpha;\n      const blue = arr[i + 2] * alpha;\n\n      redTotal += red;\n      greenTotal += green;\n      blueTotal += blue;\n      alphaTotal += alpha;\n      count++;\n    }\n\n    return alphaTotal\n      ? [\n          Math.round(redTotal / alphaTotal),\n          Math.round(greenTotal / alphaTotal),\n          Math.round(blueTotal / alphaTotal),\n          Math.round(alphaTotal / count),\n        ]\n      : [0, 0, 0, 0];\n  }\n\n  public createVideoThumbnail(\n    video: HTMLVideoElement,\n    canvas: HTMLCanvasElement,\n    thumbnailSize: number,\n    calculateAverageColor?: boolean,\n    withCredentials?: boolean\n  ): Promise<VideoThumbnail> {\n    if (withCredentials) {\n    }\n    video.setAttribute('crossOrigin', withCredentials ? 'use-credentials' : 'anonymous'); // fix cross origin issue\n    return new Promise((resolve, reject) => {\n      let loadedmetadata = false;\n      let loadeddata = false;\n      const tryGetThumbnail = () => {\n        if (!(loadedmetadata && loadeddata)) {\n          return;\n        }\n        const context = canvas.getContext('2d') as CanvasRenderingContext2D;\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        let color: RGBA | undefined;\n        if (calculateAverageColor) {\n          const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n          color = this.getAverageColor(imageData.data);\n        }\n        const url = canvas.toDataURL();\n        resolve({\n          url,\n          color,\n          width: video.videoWidth,\n          height: video.videoHeight,\n        });\n      };\n      // Load metadata of the video to get video duration and dimensions\n      video.addEventListener('loadedmetadata', () => {\n        // var video_duration = video.duration;\n        canvas.width = thumbnailSize;\n        canvas.height = (canvas.width / video.videoWidth) * video.videoHeight;\n        video.currentTime = 1; // video time\n        loadedmetadata = true;\n        tryGetThumbnail();\n      });\n\n      video.addEventListener('loadeddata', () => {\n        loadeddata = true;\n        tryGetThumbnail();\n      });\n    });\n  }\n\n  public getDataURL(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        if (!(event.target && event.target.result)) {\n          return resolve('');\n        }\n        resolve(event.target.result as string);\n      };\n      reader.readAsDataURL(file);\n    });\n  }\n\n  public getImageOrientationFromArrayBuffer(buffer: ArrayBuffer): number {\n    // -2: not jpeg\n    // -1: not defined\n    const view = new DataView(buffer);\n    if (view.getUint16(0, false) !== 0xffd8) {\n      return -2;\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) {\n        return -1;\n      }\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker === 0xffe1) {\n        if (view.getUint32((offset += 2), false) !== 0x45786966) {\n          return -1;\n        }\n        const little = view.getUint16((offset += 6), false) === 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) === 0x0112) {\n            return view.getUint16(offset + i * 12 + 8, little);\n          }\n        }\n        // tslint:disable-next-line\n      } else if ((marker & 0xff00) !== 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return -1;\n  }\n\n  public getImageOrientation(file: File): Promise<number> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      if (!reader.readAsArrayBuffer) {\n        return resolve(-3);\n      }\n      reader.onload = (event) => {\n        if (!(event.target && event.target.result)) {\n          return resolve(-3);\n        }\n        resolve(this.getImageOrientationFromArrayBuffer(event.target.result as ArrayBuffer));\n      };\n      // https://stackoverflow.com/questions/3248946/what-is-the-maximum-size-of-jpeg-metadata\n      // https://twitter.com/jaffathecake/status/1085443592678752256\n      // reader.readAsArrayBuffer(file);\n      reader.readAsArrayBuffer(file.slice(0, 65536));\n    });\n  }\n\n  public rotateCanvas(\n    srcOrientation: number,\n    canvas: HTMLCanvasElement,\n    ctx: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    // set proper canvas dimensions before transform & export\n    if (4 < srcOrientation && srcOrientation < 9) {\n      canvas.width = height;\n      canvas.height = width;\n    } else {\n      canvas.width = width;\n      canvas.height = height;\n    }\n\n    // transform context before drawing image\n    switch (srcOrientation) {\n      case 2:\n        ctx.transform(-1, 0, 0, 1, width, 0);\n        break;\n      case 3:\n        ctx.transform(-1, 0, 0, -1, width, height);\n        break;\n      case 4:\n        ctx.transform(1, 0, 0, -1, 0, height);\n        break;\n      case 5:\n        ctx.transform(0, 1, 1, 0, 0, 0);\n        break;\n      case 6:\n        ctx.transform(0, 1, -1, 0, height, 0);\n        break;\n      case 7:\n        ctx.transform(0, -1, -1, 0, height, width);\n        break;\n      case 8:\n        ctx.transform(0, -1, 1, 0, 0, width);\n        break;\n      default:\n        break;\n    }\n  }\n\n  public getImageResized(\n    image: HTMLImageElement,\n    widthLimit: number,\n    heightLimit?: number,\n    orientation?: number,\n    calculateAverageColor?: boolean\n  ): ImageThumbnail | null {\n    let width = image.width;\n    let height = image.height;\n    const thumbnailSize = widthLimit;\n    if (widthLimit && heightLimit) {\n      width = widthLimit;\n      height = heightLimit;\n    } else {\n      if (width > height) {\n        if (width > thumbnailSize) {\n          height *= thumbnailSize / width;\n          width = thumbnailSize;\n        }\n      } else {\n        if (height > thumbnailSize) {\n          width *= thumbnailSize / height;\n          height = thumbnailSize;\n        }\n      }\n    }\n\n    width = Math.floor(width);\n    height = Math.floor(height);\n\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    if (!context) {\n      return null;\n    }\n\n    canvas.width = width;\n    canvas.height = height;\n\n    if (orientation !== undefined) {\n      this.rotateCanvas(orientation, canvas, context, width, height);\n    }\n\n    context.drawImage(image, 0, 0, width, height);\n    let avgColor = null;\n    try {\n      let rgba: RGBA | undefined;\n      if (calculateAverageColor) {\n        const imageData = context.getImageData(0, 0, width, height);\n        rgba = this.getAverageColor(imageData.data);\n      }\n      if (rgba) {\n        avgColor = rgba;\n      }\n    } catch (e) {\n      /* security error, img on diff domain */\n    }\n    return {\n      image,\n      url: canvas.toDataURL('image/png'),\n      color: avgColor,\n    } as ImageThumbnail;\n  }\n\n  public resizeImageUrl(\n    image: HTMLImageElement,\n    url: string,\n    thumbnailSize: number,\n    calculateAverageColor?: boolean\n  ): Promise<ImageThumbnail | null> {\n    return new Promise((resolve, reject) => {\n      image.onload = () => {\n        if (!calculateAverageColor) {\n          resolve({\n            image,\n            url,\n            color: undefined,\n          } as ImageThumbnail);\n          return;\n        }\n        const resized = this.getImageResized(image, thumbnailSize, undefined, undefined, calculateAverageColor);\n        if (resized) {\n          resized.url = url;\n        }\n        resolve(resized);\n      };\n      image.onerror = () => {\n        reject('Image loading failed: ' + url);\n      };\n      image.src = url;\n    });\n  }\n\n  public resizeImageFile(\n    image: HTMLImageElement,\n    file: File,\n    thumbnailSize: number,\n    calculateAverageColor?: boolean\n  ): Promise<ImageThumbnail | null> {\n    return new Promise((resolve, reject) => {\n      if (file.type.indexOf('image') === -1) {\n        reject(new Error('Not an image'));\n        return;\n      }\n      const createObjectURL = (window.URL || window.webkitURL || {}).createObjectURL;\n      const revokeObjectURL = (window.URL || window.webkitURL || {}).revokeObjectURL;\n      let shouldRevoke = false;\n      const orientationPromise = this.getImageOrientation(file);\n      image.onload = () => {\n        orientationPromise.then((orientation) => {\n          const resized = this.getImageResized(image, thumbnailSize, undefined, orientation, calculateAverageColor);\n          if (shouldRevoke) {\n            revokeObjectURL(image.src);\n          }\n          resolve(resized);\n        });\n      };\n      if (!(file instanceof File)) {\n        return reject('Invalid file object. Use url or a valid instance of File class');\n      }\n      if (typeof createObjectURL === 'function' && typeof revokeObjectURL === 'function') {\n        shouldRevoke = true;\n        image.src = createObjectURL(file);\n        return;\n      }\n      this.getDataURL(file).then((dataUrl) => {\n        image.src = dataUrl;\n      });\n    });\n  }\n\n  public resizeImage(\n    thumbnailSize: number,\n    file?: File,\n    url?: string,\n    calculateAverageColor?: boolean,\n    withCredentials?: boolean\n  ): Promise<ImageThumbnail | null> {\n    const image = new Image();\n    image.setAttribute('crossOrigin', withCredentials ? 'use-credentials' : 'anonymous');\n    return url\n      ? this.resizeImageUrl(image, url, thumbnailSize, calculateAverageColor)\n      : this.resizeImageFile(image, file as File, thumbnailSize, calculateAverageColor);\n  }\n\n  public getSizeFormatted(bytes: number) {\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n      return '0 B';\n    }\n    let i = Math.floor(Math.log(bytes) / Math.log(1024));\n    i = parseInt('' + i, 10);\n    return Math.round(bytes / Math.pow(1024, i)) + ' ' + sizes[i];\n  }\n\n  public getSizeParsed(size: string): number {\n    size = ('' + size).toUpperCase();\n    const matches = size.match(/([\\d|.]+?)\\s*?([A-Z]+)/);\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    if (!matches) {\n      return parseFloat(size);\n    }\n    const i = sizes.indexOf(matches[2]);\n    if (i === -1) {\n      return parseFloat(size);\n    }\n    return parseFloat(matches[1]) * Math.pow(1024, i);\n  }\n\n  public getColorForText(text: string): string {\n    const getHashCode = (value: string) => {\n      let hash = 0;\n      if (value.length === 0) {\n        return hash;\n      }\n      for (let i = 0; i < value.length; i++) {\n        // tslint:disable-next-line\n        hash = value.charCodeAt(i) + ((hash << 5) - hash);\n        // tslint:disable-next-line\n        hash = hash & hash; // Convert to 32bit integer\n      }\n      return hash;\n    };\n    const intToHSL = (value: number) => {\n      const h = value % 360;\n      const s = value % 100;\n      const l = 50;\n      return 'hsl(' + h + ',' + s + '%,' + l + '%, 0.75)';\n    };\n    return intToHSL(getHashCode(text.toLowerCase()));\n  }\n\n  public validateType(file: File, accept?: string): boolean {\n    // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept\n    // https://gitlab.com/meno/dropzone/blob/master/src/dropzone.js#L2511\n    if (!accept) {\n      return true;\n    } // If there are no accepted mime types, it's OK\n    const acceptedFiles = accept.split(',');\n\n    const mimeType = file.type;\n    const baseMimeType = mimeType.replace(/\\/.*$/, '');\n\n    for (let validType of acceptedFiles) {\n      validType = validType.trim();\n      if (validType.charAt(0) === '.') {\n        // extension\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        // This is something like a image/* mime type\n        if (baseMimeType === validType.replace(/\\/.*$/, '')) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  public validateSize(file: File, maxSize?: string): boolean {\n    if (!maxSize) {\n      return true;\n    }\n    const bytes = this.getSizeParsed(maxSize);\n    return file.size <= bytes;\n  }\n\n  public getFilesFromDroppedItems(dataTransfer: DataTransfer) {\n    return getFilesFromDroppedItems(dataTransfer);\n  }\n}\n\nexport default new Utils();\n","<template>\n  <div\n    :class=\"[\n      'file-preview-wrapper-' + fileRecord.ext(),\n      fileRecord.isImage() ? 'file-preview-wrapper-image' : 'file-preview-wrapper-other',\n      'file-category-' + fileRecord.icon().category,\n      {'file-is-playing-av': fileRecord.isPlayingAv},\n      {'is-deletable': deletable === true},\n      {'is-editable': editable === true},\n      {'is-edit-input-focused': isEditInputFocused},\n      {'has-error': fileRecord.error},\n    ]\"\n  >\n    <div\n      v-if=\"fileRecord.isPlayableAudio() || fileRecord.isPlayableVideo()\"\n      ref=\"wrapper\"\n      class=\"file-av-wrapper\"\n    >\n      <div class=\"file-av-action\" @click=\"playAv(fileRecord)\">\n        <span class=\"file-av-stop\">\n          <VueFileIcon name=\"system-close\" />\n        </span>\n        <span class=\"file-av-play\">\n          <VueFileIcon name=\"system-file-av-play\" />\n        </span>\n      </div>\n    </div>\n    <span\n      class=\"file-preview\"\n      :class=\"{\n        'image-preview': fileRecord.isImage(),\n        'other-preview': !fileRecord.isImage(),\n        'dark-content': fileRecord.isImage() && fileRecord.isDarkColor(),\n      }\"\n      :style=\"{\n        'background-color': fileRecord.color(),\n      }\"\n    >\n      <span v-if=\"fileRecord.error\" class=\"file-error-wrapper\" @click=\"dismissError()\">\n        <span class=\"file-error-message file-error-message-client\">\n          {{ fileRecord.getErrorMessage(errorText) }}\n        </span>\n      </span>\n      <span class=\"file-preview-overlay\" />\n      <span\n        v-if=\"fileRecord.isImage() || fileRecord.isPlayableVideo()\"\n        class=\"thumbnail\"\n        style=\"position: absolute; top: 0; right: 0; bottom: 0; left: 0; overflow: hidden\"\n      >\n        <a\n          v-if=\"hasLinkableUrl\"\n          :href=\"fileRecord.url()\"\n          target=\"_blank\"\n          :title=\"fileRecord.name()\"\n        >\n          <img class=\"file-preview-img\" :src=\"fileRecord.src()\" />\n        </a>\n        <img v-else class=\"file-preview-img\" :src=\"fileRecord.src()\" />\n      </span>\n      <span class=\"file-ext\">{{ fileRecord.ext() }}</span>\n      <span class=\"file-size\">{{ fileRecord.size() }}</span>\n      <span\n        v-if=\"deletable\"\n        class=\"file-delete\"\n        @click=\"removeFileRecord(fileRecord)\"\n        @touchstart=\"filenameClearPressed()\"\n        @mousedown=\"filenameClearPressed()\"\n      >\n        <VueFileIcon name=\"system-close\" />\n      </span>\n      <span class=\"file-name\" @click=\"editFileName()\">\n        <input\n          v-if=\"editable === true\"\n          ref=\"input\"\n          class=\"file-name-input\"\n          :disabled=\"disabled === true\"\n          type=\"text\"\n          :value=\"fileRecord.name(true)\"\n          @focus=\"editInputFocused()\"\n          @blur=\"editInputBlured()\"\n          @change=\"filenameChanged()\"\n          @input=\"filenameChanged()\"\n          @keyup.enter=\"filenameChanged(true)\"\n          @keyup.esc=\"filenameChanged(false)\"\n        />\n        <span v-if=\"editable === true\" class=\"file-name-edit-icon\">\n          <VueFileIcon name=\"system-file-name-edit\" />\n        </span>\n        <span class=\"file-name-text\">{{ getPathAndName(fileRecord) }}</span>\n      </span>\n      <span\n        v-if=\"fileRecord.dimensions.width && fileRecord.dimensions.height\"\n        class=\"image-dimension\"\n      >\n        <span class=\"image-dimension-width\">{{ fileRecord.dimensions.width }}</span\n        ><span class=\"image-dimension-height\">{{ fileRecord.dimensions.height }}</span>\n      </span>\n      <span\n        v-if=\"fileRecord.hasProgress()\"\n        class=\"file-progress\"\n        :class=\"{\n          'file-progress-full': fileRecord.progress() >= 99.9999,\n          'file-progress-done': fileRecord.progress() >= 100,\n          'has-file-progress': fileRecord.progress() > 0,\n        }\"\n      >\n        <span class=\"file-progress-bar\" :style=\"{width: fileRecord.progress() + '%'}\" />\n      </span>\n      <span class=\"file-icon\">\n        <a\n          v-if=\"hasLinkableUrl\"\n          :href=\"fileRecord.url()\"\n          target=\"_blank\"\n          :title=\"fileRecord.name()\"\n        >\n          <VueFileIcon :ext=\"fileRecord.ext()\" />\n        </a>\n        <VueFileIcon v-else :ext=\"fileRecord.ext()\" />\n      </span>\n    </span>\n  </div>\n</template>\n<script lang=\"ts\">\nimport {defineComponent, PropType} from 'vue'\nimport VueFileIcon from './VueFileIcon.vue'\nimport FileRecord, {ErrorText} from '../lib/file-record'\nimport utils from '../lib/utils'\nimport {FileAgentFile} from '../lib/interfaces'\n\nexport default /* #__PURE__ */ defineComponent({\n  name: 'VueFilePreview',\n  components: {\n    VueFileIcon,\n  },\n  props: {\n    averageColor: Boolean,\n    deletable: Boolean,\n    disabled: Boolean,\n    editable: Boolean,\n    errorText: {\n      type: Object as PropType<ErrorText>,\n      required: false,\n    },\n    linkable: Boolean,\n    thumbnailSize: Number,\n    fileRecord: {\n      type: Object as PropType<FileRecord>,\n      required: true,\n    },\n    withCredentials: Boolean,\n  },\n  emits: ['dismisserror', 'remove', 'rename'],\n  data() {\n    return {\n      isEditInputFocused: false,\n      isEditCancelable: true,\n    }\n  },\n  computed: {\n    hasLinkableUrl(): boolean {\n      if (!this.linkable) {\n        return false\n      }\n      return (\n        !!this.fileRecord.url() &&\n        !this.fileRecord.isPlayableVideo() &&\n        !this.fileRecord.isPlayableAudio()\n      )\n    },\n  },\n  watch: {\n    fileRecord: {\n      handler() {\n        // fileRecord is updated, but the component not redrawn when used inside a loop\n        // -> force update in the meantime\n        this.$forceUpdate()\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    getPathAndName(fileRecord: FileRecord): string {\n      let name = fileRecord.name(false)\n\n      const file = fileRecord.file as FileAgentFile\n\n      if (file.fullPath) {\n        name = `${file.fullPath}/${name}`\n      }\n\n      return name\n    },\n    createThumbnail(fileRecord: FileRecord, video: HTMLVideoElement) {\n      if (fileRecord.videoThumbnail) {\n        video.poster = fileRecord.src()\n        return\n      }\n      const canvas = document.createElement('canvas')\n      utils\n        .createVideoThumbnail(\n          video,\n          canvas,\n          this.fileRecord.thumbnailSize,\n          this.averageColor !== false,\n          this.withCredentials === true\n        )\n        .then((thumbnail) => {\n          fileRecord.imageColor = thumbnail.color\n          fileRecord.videoThumbnail = thumbnail.url\n          fileRecord.dimensions.width = thumbnail.width\n          fileRecord.dimensions.height = thumbnail.height\n          video.poster = fileRecord.src()\n        })\n    },\n    playAv(fileRecord: FileRecord) {\n      if (fileRecord.stopAv) {\n        fileRecord.stopAv()\n        return\n      }\n      const {createObjectURL} = window.URL || window.webkitURL || {}\n      const {revokeObjectURL} = window.URL || window.webkitURL || {}\n\n      const wrapper = this.$refs.wrapper as HTMLElement\n      const player = document.createElement(fileRecord.isAudio() ? 'audio' : 'video')\n      if (player instanceof HTMLVideoElement && fileRecord.isPlayableVideo()) {\n        this.createThumbnail(fileRecord, player)\n      }\n      player.controls = true\n      // player.style.width = this.prvWidth + 'px';\n      wrapper.appendChild(player)\n      const url = (fileRecord.url() as string) || createObjectURL(fileRecord.file)\n      player.src = url\n      player.play()\n      fileRecord.isPlayingAv = true\n      fileRecord.stopAv = () => {\n        // player.src = null;\n        player.src = ''\n        wrapper.removeChild(player)\n        revokeObjectURL(url)\n        fileRecord.isPlayingAv = false\n        fileRecord.stopAv = null\n      }\n    },\n    removeFileRecord(fileRecord: FileRecord) {\n      if (this.clearFilename()) {\n        return\n      }\n      if (this.disabled === true) {\n        return\n      }\n      this.$emit('remove', fileRecord)\n    },\n    editFileName() {\n      if (this.editable !== true) {\n        return\n      }\n      if (!this.$refs.input) {\n        return\n      }\n      ;(this.$refs.input as HTMLInputElement).focus()\n    },\n    editInputFocused() {\n      this.isEditInputFocused = true\n      this.isEditCancelable = true\n    },\n    editInputBlured() {\n      const {fileRecord} = this\n      fileRecord.oldFileName = this.fileRecord.name()\n      const oldFilenameWithoutExt = this.fileRecord.name(true)\n      const {value} = this.$refs.input as HTMLInputElement\n      fileRecord.customName = value\n      const newValueWithoutExt = this.fileRecord.name(true)\n      if (newValueWithoutExt !== oldFilenameWithoutExt) {\n        fileRecord.oldCustomName = oldFilenameWithoutExt\n        this.$emit('rename', fileRecord)\n      }\n      const timeout = 100\n      window.setTimeout(() => {\n        this.$nextTick(() => {\n          if (!this.isEditCancelable) {\n            return\n          }\n          this.isEditInputFocused = false\n        })\n      }, timeout)\n    },\n    filenameChanged(completed?: boolean) {\n      if (completed) {\n        ;(this.$refs.input as HTMLInputElement).blur() // @see editInputBlured method\n      }\n      if (completed === false) {\n        this.clearFilename()\n      }\n    },\n    filenameClearPressed() {\n      if (!(this.editable === true && this.isEditInputFocused)) {\n        return\n      }\n      this.isEditCancelable = false\n    },\n    clearFilename() {\n      if (!(this.editable === true && this.isEditInputFocused)) {\n        return false\n      }\n      ;(this.$refs.input as HTMLInputElement).value = ''\n      this.isEditCancelable = true\n      this.editInputBlured()\n      return true\n    },\n    dismissError() {\n      if (this.fileRecord.error && (this.fileRecord.error.size || this.fileRecord.error.type)) {\n        return\n      }\n\n      this.$emit('dismisserror', this.fileRecord)\n    },\n  },\n})\n</script>\n","<template>\n  <div>\n    <slot />\n  </div>\n</template>\n<script lang=\"ts\">\nimport FileRecord from '../lib/file-record'\nimport {defineComponent} from 'vue'\n\nexport default /* #__PURE__ */ defineComponent({\n  name: 'VueFileList',\n  props: {\n    list: {type: Array<FileRecord>, required: true},\n    axis: {type: String, required: true},\n    appendTo: {type: String, required: true},\n  },\n})\n</script>\n","<template>\n  <div>\n    <slot />\n  </div>\n</template>\n<script lang=\"ts\">\nimport {defineComponent} from 'vue'\n\nexport default /* #__PURE__ */ defineComponent({\n  name: 'VueFileListItem',\n  props: {\n    index: Number,\n  },\n})\n</script>\n","import { defineComponent, h } from 'vue';\n\n// Export Sortable Element Component Mixin\nconst ElementMixin = defineComponent({\n    inject: ['manager'],\n    props: {\n        index: {\n            type: Number,\n            required: true,\n        },\n        disabled: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    data() {\n        return {};\n    },\n    watch: {\n        index(newIndex) {\n            if (this.$el && this.$el.sortableInfo) {\n                this.$el.sortableInfo.index = newIndex;\n            }\n        },\n        disabled(isDisabled) {\n            if (isDisabled) {\n                this.removeDraggable();\n            }\n            else {\n                this.setDraggable(this.index);\n            }\n        },\n    },\n    mounted() {\n        const { disabled, index } = this.$props;\n        if (!disabled) {\n            this.setDraggable(index);\n        }\n    },\n    beforeUnmount() {\n        if (!this.disabled)\n            this.removeDraggable();\n    },\n    methods: {\n        setDraggable(index) {\n            const node = this.$el;\n            node.sortableInfo = {\n                index,\n                manager: this.manager,\n            };\n            this.ref = { node };\n            this.manager.add(this.ref);\n        },\n        removeDraggable() {\n            this.manager.remove(this.ref);\n        },\n    },\n});\n\nclass Manager {\n    constructor() {\n        this.refs = [];\n        this.active = null;\n    }\n    add(ref) {\n        if (!this.refs) {\n            this.refs = [];\n        }\n        this.refs.push(ref);\n    }\n    remove(ref) {\n        const index = this.getIndex(ref);\n        if (index !== -1) {\n            this.refs.splice(index, 1);\n        }\n    }\n    isActive() {\n        return !!this.active;\n    }\n    getActive() {\n        return this.refs.find(({ node }) => { var _a, _b; return ((_a = node === null || node === void 0 ? void 0 : node.sortableInfo) === null || _a === void 0 ? void 0 : _a.index) == ((_b = this === null || this === void 0 ? void 0 : this.active) === null || _b === void 0 ? void 0 : _b.index); }) || null;\n    }\n    getIndex(ref) {\n        return this.refs.indexOf(ref);\n    }\n    getRefs() {\n        return this.refs;\n    }\n    getOrderedRefs() {\n        return this.refs.sort((a, b) => {\n            return a.node.sortableInfo.index - b.node.sortableInfo.index;\n        });\n    }\n}\n\nconst isTouch = (e) => {\n    return e.touches != null;\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction hasOwnProperty(obj, prop) {\n    return !!obj && Object.prototype.hasOwnProperty.call(obj, prop);\n}\nfunction arrayMove(arr, previousIndex, newIndex) {\n    const array = arr.slice(0);\n    if (newIndex >= array.length) {\n        let k = newIndex - array.length;\n        while (k-- + 1) {\n            array.push(undefined);\n        }\n    }\n    array.splice(newIndex, 0, array.splice(previousIndex, 1)[0]);\n    return array;\n}\nfunction arrayRemove(arr, previousIndex) {\n    const array = arr.slice(0);\n    if (previousIndex >= array.length)\n        return array;\n    array.splice(previousIndex, 1);\n    return array;\n}\nfunction arrayInsert(arr, newIndex, value) {\n    const array = arr.slice(0);\n    if (newIndex === array.length) {\n        array.push(value);\n    }\n    else {\n        array.splice(newIndex, 0, value);\n    }\n    return array;\n}\nconst events = {\n    start: ['touchstart', 'mousedown'],\n    move: ['touchmove', 'mousemove'],\n    end: ['touchend', 'mouseup'],\n    cancel: ['touchcancel', 'keyup'],\n};\nfunction closest(el, fn) {\n    while (el) {\n        if (fn(el))\n            return el;\n        el = el.parentNode;\n    }\n}\nfunction limit(min, max, value) {\n    if (value < min) {\n        return min;\n    }\n    if (value > max) {\n        return max;\n    }\n    return value;\n}\nfunction getCSSPixelValue(stringValue) {\n    if (stringValue.substr(-2) === 'px') {\n        return parseFloat(stringValue);\n    }\n    return 0;\n}\nfunction getElementMargin(element) {\n    const style = window.getComputedStyle(element);\n    return {\n        top: getCSSPixelValue(style.marginTop),\n        right: getCSSPixelValue(style.marginRight),\n        bottom: getCSSPixelValue(style.marginBottom),\n        left: getCSSPixelValue(style.marginLeft),\n    };\n}\nfunction getPointerOffset(e, reference = 'page') {\n    const x = `${reference}X`;\n    const y = `${reference}Y`;\n    return {\n        x: isTouch(e) ? e.touches[0][x] : e[x],\n        y: isTouch(e) ? e.touches[0][y] : e[y],\n    };\n}\nfunction offsetParents(node) {\n    const nodes = [node];\n    for (; node; node = node.offsetParent) {\n        nodes.unshift(node);\n    }\n    return nodes;\n}\nfunction commonOffsetParent(node1, node2) {\n    const parents1 = offsetParents(node1);\n    const parents2 = offsetParents(node2);\n    if (parents1[0] != parents2[0])\n        throw 'No common ancestor!';\n    for (let i = 0; i < parents1.length; i++) {\n        if (parents1[i] != parents2[i])\n            return parents1[i - 1];\n    }\n}\nfunction getEdgeOffset(node, container, offset = { top: 0, left: 0 }) {\n    // Get the actual offsetTop / offsetLeft value, no matter how deep the node is nested\n    if (node) {\n        const nodeOffset = {\n            top: offset.top + node.offsetTop,\n            left: offset.left + node.offsetLeft,\n        };\n        if (node.offsetParent !== container.offsetParent) {\n            return getEdgeOffset(node.offsetParent, container, nodeOffset);\n        }\n        else {\n            return nodeOffset;\n        }\n    }\n    return { top: 0, left: 0 };\n}\nfunction cloneNode(node) {\n    const fields = node.querySelectorAll('input, textarea, select');\n    const clonedNode = node.cloneNode(true);\n    const clonedFields = [...clonedNode.querySelectorAll('input, textarea, select')]; // Convert NodeList to Array\n    clonedFields.forEach((field, index) => {\n        if (field.type !== 'file' && fields[index]) {\n            field.value = fields[index].value;\n        }\n    });\n    return clonedNode;\n}\nfunction getLockPixelOffsets(lockOffset, width, height) {\n    if (typeof lockOffset == 'string') {\n        lockOffset = +lockOffset;\n    }\n    if (!Array.isArray(lockOffset)) {\n        lockOffset = [lockOffset, lockOffset];\n    }\n    if (lockOffset.length !== 2) {\n        throw new Error(`lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given ${lockOffset}`);\n    }\n    const [minLockOffset, maxLockOffset] = lockOffset;\n    return [getLockPixelOffset(minLockOffset, width, height), getLockPixelOffset(maxLockOffset, width, height)];\n}\nfunction getLockPixelOffset(lockOffset, width, height) {\n    let offsetX = lockOffset;\n    let offsetY = lockOffset;\n    let unit = 'px';\n    if (typeof lockOffset === 'string') {\n        const match = /^[+-]?\\d*(?:\\.\\d*)?(px|%)$/.exec(lockOffset);\n        if (match === null) {\n            throw new Error(`lockOffset value should be a number or a string of a number followed by \"px\" or \"%\". Given ${lockOffset}`);\n        }\n        offsetX = offsetY = parseFloat(lockOffset);\n        unit = match[1];\n    }\n    if (!isFinite(offsetX) || !isFinite(offsetY)) {\n        throw new Error(`lockOffset value should be a finite. Given ${lockOffset}`);\n    }\n    if (unit === '%') {\n        offsetX = (offsetX * width) / 100;\n        offsetY = (offsetY * height) / 100;\n    }\n    return {\n        x: offsetX,\n        y: offsetY,\n    };\n}\nfunction getDistance(x1, y1, x2, y2) {\n    const x = x1 - x2;\n    const y = y1 - y2;\n    return Math.sqrt(x * x + y * y);\n}\nfunction getRectCenter(clientRect) {\n    return {\n        x: clientRect.left + clientRect.width / 2,\n        y: clientRect.top + clientRect.height / 2,\n    };\n}\nfunction resetTransform(nodes = []) {\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        const node = nodes[i];\n        const el = node.node;\n        if (!el)\n            return;\n        // Clear the cached offsetTop / offsetLeft value\n        node.edgeOffset = null;\n        // Remove the transforms / transitions\n        setTransform(el);\n    }\n}\nfunction setTransform(el, transform = '', duration = '') {\n    if (!el)\n        return;\n    el.style['transform'] = transform;\n    el.style['transitionDuration'] = duration;\n}\nfunction withinBounds(pos, top, bottom) {\n    const upper = Math.max(top, bottom);\n    const lower = Math.min(top, bottom);\n    return lower <= pos && pos <= upper;\n}\nfunction isPointWithinRect({ x, y }, { top, left, width, height }) {\n    const withinX = withinBounds(x, left, left + width);\n    const withinY = withinBounds(y, top, top + height);\n    return withinX && withinY;\n}\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst timeout = setTimeout;\n// Export Sortable Container Component Mixin\nconst ContainerMixin = defineComponent({\n    inject: {\n        SlicksortHub: {\n            from: 'SlicksortHub',\n            default: null,\n        },\n    },\n    provide() {\n        return {\n            manager: this.manager,\n        };\n    },\n    props: {\n        list: { type: Array, required: true },\n        axis: { type: String, default: 'y' },\n        distance: { type: Number, default: 0 },\n        pressDelay: { type: Number, default: 0 },\n        pressThreshold: { type: Number, default: 5 },\n        useDragHandle: { type: Boolean, default: false },\n        useWindowAsScrollContainer: { type: Boolean, default: false },\n        hideSortableGhost: { type: Boolean, default: true },\n        lockToContainerEdges: { type: Boolean, default: false },\n        lockOffset: { type: [String, Number, Array], default: '50%' },\n        transitionDuration: { type: Number, default: 300 },\n        appendTo: { type: String, default: 'body' },\n        draggedSettlingDuration: { type: Number, default: null },\n        group: { type: String, default: '' },\n        accept: { type: [Boolean, Array, Function], default: null },\n        cancelKey: { type: String, default: 'Escape' },\n        block: { type: Array, default: () => [] },\n        lockAxis: { type: String, default: '' },\n        helperClass: { type: String, default: '' },\n        contentWindow: { type: Object, default: null },\n        shouldCancelStart: {\n            type: Function,\n            default: (e) => {\n                // Cancel sorting if the event target is an `input`, `textarea`, `select` or `option`\n                const disabledElements = ['input', 'textarea', 'select', 'option', 'button'];\n                return disabledElements.indexOf(e.target.tagName.toLowerCase()) !== -1;\n            },\n        },\n        getHelperDimensions: {\n            type: Function,\n            default: ({ node }) => ({\n                width: node.offsetWidth,\n                height: node.offsetHeight,\n            }),\n        },\n    },\n    emits: ['sort-start', 'sort-move', 'sort-end', 'sort-cancel', 'sort-insert', 'sort-remove', 'update:list'],\n    data() {\n        let useHub = false;\n        if (this.group) {\n            // If the group option is set, it is assumed the user intends\n            // to drag between containers and the required plugin has been installed\n            if (this.SlicksortHub) {\n                useHub = true;\n            }\n            else if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Slicksort plugin required to use \"group\" prop');\n            }\n        }\n        return {\n            sorting: false,\n            hub: useHub ? this.SlicksortHub : null,\n            manager: new Manager(),\n        };\n    },\n    mounted() {\n        if (this.hub) {\n            this.id = this.hub.getId();\n        }\n        this.container = this.$el;\n        this.document = this.container.ownerDocument || document;\n        this._window = this.contentWindow || window;\n        this.scrollContainer = this.useWindowAsScrollContainer ? { scrollLeft: 0, scrollTop: 0 } : this.container;\n        this.events = {\n            start: this.handleStart,\n            move: this.handleMove,\n            end: this.handleEnd,\n        };\n        for (const key in this.events) {\n            if (hasOwnProperty(this.events, key)) {\n                // @ts-ignore\n                events[key].forEach((eventName) => this.container.addEventListener(eventName, this.events[key]));\n            }\n        }\n        if (this.hub) {\n            this.hub.addContainer(this);\n        }\n    },\n    beforeUnmount() {\n        for (const key in this.events) {\n            if (hasOwnProperty(this.events, key)) {\n                // @ts-ignore\n                events[key].forEach((eventName) => this.container.removeEventListener(eventName, this.events[key]));\n            }\n        }\n        if (this.hub) {\n            this.hub.removeContainer(this);\n        }\n        if (this.dragendTimer)\n            clearTimeout(this.dragendTimer);\n        if (this.cancelTimer)\n            clearTimeout(this.cancelTimer);\n        if (this.pressTimer)\n            clearTimeout(this.pressTimer);\n        if (this.autoscrollInterval)\n            clearInterval(this.autoscrollInterval);\n    },\n    methods: {\n        handleStart(e) {\n            const { distance, shouldCancelStart } = this.$props;\n            if ((!isTouch(e) && e.button === 2) || shouldCancelStart(e)) {\n                return false;\n            }\n            this._touched = true;\n            this._pos = getPointerOffset(e);\n            const target = e.target;\n            const node = closest(target, (el) => el.sortableInfo != null);\n            if (node && node.sortableInfo && this.nodeIsChild(node) && !this.sorting) {\n                const { useDragHandle } = this.$props;\n                const { index } = node.sortableInfo;\n                if (useDragHandle && !closest(target, (el) => el.sortableHandle != null))\n                    return;\n                this.manager.active = { index };\n                /*\n                 * Fixes a bug in Firefox where the :active state of anchor tags\n                 * prevent subsequent 'mousemove' events from being fired\n                 * (see https://github.com/clauderic/react-sortable-hoc/issues/118)\n                 */\n                if (target.tagName.toLowerCase() === 'a') {\n                    e.preventDefault();\n                }\n                if (!distance) {\n                    if (this.pressDelay === 0) {\n                        this.handlePress(e);\n                    }\n                    else {\n                        this.pressTimer = timeout(() => this.handlePress(e), this.pressDelay);\n                    }\n                }\n            }\n        },\n        nodeIsChild(node) {\n            return node.sortableInfo.manager === this.manager;\n        },\n        handleMove(e) {\n            const { distance, pressThreshold } = this.$props;\n            if (!this.sorting && this._touched) {\n                const offset = getPointerOffset(e);\n                this._delta = {\n                    x: this._pos.x - offset.x,\n                    y: this._pos.y - offset.y,\n                };\n                const delta = Math.abs(this._delta.x) + Math.abs(this._delta.y);\n                if (!distance && (!pressThreshold || (pressThreshold && delta >= pressThreshold))) {\n                    if (this.cancelTimer)\n                        clearTimeout(this.cancelTimer);\n                    this.cancelTimer = timeout(this.cancel, 0);\n                }\n                else if (distance && delta >= distance && this.manager.isActive()) {\n                    this.handlePress(e);\n                }\n            }\n        },\n        handleEnd() {\n            if (!this._touched)\n                return;\n            const { distance } = this.$props;\n            this._touched = false;\n            if (!distance) {\n                this.cancel();\n            }\n        },\n        cancel() {\n            if (!this.sorting) {\n                if (this.pressTimer)\n                    clearTimeout(this.pressTimer);\n                this.manager.active = null;\n                if (this.hub)\n                    this.hub.cancel();\n            }\n        },\n        handleSortCancel(e) {\n            if (isTouch(e) || e.key === this.cancelKey) {\n                this.newIndex = this.index;\n                this.canceling = true;\n                this.translate = { x: 0, y: 0 };\n                this.animateNodes();\n                this.handleSortEnd(e);\n            }\n        },\n        handlePress(e) {\n            e.stopPropagation();\n            const active = this.manager.getActive();\n            if (active) {\n                const { getHelperDimensions, helperClass, hideSortableGhost, appendTo } = this.$props;\n                const { node } = active;\n                const { index } = node.sortableInfo;\n                const margin = getElementMargin(node);\n                const containerBoundingRect = this.container.getBoundingClientRect();\n                const dimensions = getHelperDimensions({ index, node });\n                this.node = node;\n                this.margin = margin;\n                this.width = dimensions.width;\n                this.height = dimensions.height;\n                this.marginOffset = {\n                    x: this.margin.left + this.margin.right,\n                    y: Math.max(this.margin.top, this.margin.bottom),\n                };\n                this.boundingClientRect = node.getBoundingClientRect();\n                this.containerBoundingRect = containerBoundingRect;\n                this.index = index;\n                this.newIndex = index;\n                const clonedNode = cloneNode(node);\n                this.helper = this.document.querySelector(appendTo).appendChild(clonedNode);\n                this.helper.style.position = 'fixed';\n                this.helper.style.top = `${this.boundingClientRect.top - margin.top}px`;\n                this.helper.style.left = `${this.boundingClientRect.left - margin.left}px`;\n                this.helper.style.width = `${this.width}px`;\n                this.helper.style.height = `${this.height}px`;\n                this.helper.style.boxSizing = 'border-box';\n                this.helper.style.pointerEvents = 'none';\n                if (hideSortableGhost) {\n                    this.sortableGhost = node;\n                    node.style.visibility = 'hidden';\n                    node.style.opacity = '0';\n                }\n                if (this.hub) {\n                    this.hub.sortStart(this);\n                    this.hub.helper = this.helper;\n                    this.hub.ghost = this.sortableGhost;\n                }\n                this.intializeOffsets(e, this.boundingClientRect);\n                this.offsetEdge = getEdgeOffset(node, this.container);\n                if (helperClass) {\n                    this.helper.classList.add(...helperClass.split(' '));\n                }\n                this.listenerNode = isTouch(e) ? node : this._window;\n                // @ts-ignore\n                events.move.forEach((eventName) => this.listenerNode.addEventListener(eventName, this.handleSortMove));\n                // @ts-ignore\n                events.end.forEach((eventName) => this.listenerNode.addEventListener(eventName, this.handleSortEnd));\n                // @ts-ignore\n                events.cancel.forEach((eventName) => this.listenerNode.addEventListener(eventName, this.handleSortCancel));\n                this.sorting = true;\n                this.$emit('sort-start', { event: e, node, index });\n            }\n        },\n        handleSortMove(e) {\n            e.preventDefault(); // Prevent scrolling on mobile\n            this.updatePosition(e);\n            if (this.hub) {\n                const payload = this.list[this.index];\n                this.hub.handleSortMove(e, payload);\n            }\n            if (!this.hub || this.hub.isDest(this)) {\n                this.animateNodes();\n                this.autoscroll();\n            }\n            this.$emit('sort-move', { event: e });\n        },\n        handleDropOut() {\n            const removed = this.list[this.index];\n            const newValue = arrayRemove(this.list, this.index);\n            this.$emit('sort-remove', {\n                oldIndex: this.index,\n            });\n            this.$emit('update:list', newValue);\n            return removed;\n        },\n        handleDropIn(payload) {\n            const newValue = arrayInsert(this.list, this.newIndex, payload);\n            this.$emit('sort-insert', {\n                newIndex: this.newIndex,\n                value: payload,\n            });\n            this.$emit('update:list', newValue);\n            this.handleDragEnd();\n        },\n        handleDragOut() {\n            if (this.autoscrollInterval) {\n                clearInterval(this.autoscrollInterval);\n                this.autoscrollInterval = null;\n            }\n            if (this.hub.isSource(this)) {\n                // Trick to animate all nodes up\n                this.translate = {\n                    x: 10000,\n                    y: 10000,\n                };\n                this.animateNodes();\n            }\n            else {\n                this.manager.getRefs().forEach((ref) => {\n                    ref.node.style['transform'] = '';\n                });\n                this.dragendTimer = timeout(this.handleDragEnd, this.transitionDuration || 0);\n            }\n        },\n        handleDragEnd() {\n            if (this.autoscrollInterval) {\n                clearInterval(this.autoscrollInterval);\n                this.autoscrollInterval = null;\n            }\n            resetTransform(this.manager.getRefs());\n            if (this.sortableGhost) {\n                this.sortableGhost.remove();\n                this.sortableGhost = null;\n            }\n            if (this.dragendTimer) {\n                clearTimeout(this.dragendTimer);\n                this.dragendTimer = null;\n            }\n            this.manager.active = null;\n            this._touched = false;\n            this.sorting = false;\n        },\n        intializeOffsets(e, clientRect) {\n            const { useWindowAsScrollContainer, containerBoundingRect, _window } = this;\n            this.marginOffset = {\n                x: this.margin.left + this.margin.right,\n                y: Math.max(this.margin.top, this.margin.bottom),\n            };\n            this._axis = {\n                x: this.axis.indexOf('x') >= 0,\n                y: this.axis.indexOf('y') >= 0,\n            };\n            this.initialOffset = getPointerOffset(e);\n            // initialScroll;\n            this.initialScroll = {\n                top: this.scrollContainer.scrollTop,\n                left: this.scrollContainer.scrollLeft,\n            };\n            // initialWindowScroll;\n            this.initialWindowScroll = {\n                top: window.pageYOffset,\n                left: window.pageXOffset,\n            };\n            this.translate = { x: 0, y: 0 };\n            this.minTranslate = {};\n            this.maxTranslate = {};\n            if (this._axis.x) {\n                this.minTranslate.x =\n                    (useWindowAsScrollContainer ? 0 : containerBoundingRect.left) - clientRect.left - this.width / 2;\n                this.maxTranslate.x =\n                    (useWindowAsScrollContainer ? _window.innerWidth : containerBoundingRect.left + containerBoundingRect.width) -\n                        clientRect.left -\n                        this.width / 2;\n            }\n            if (this._axis.y) {\n                this.minTranslate.y =\n                    (useWindowAsScrollContainer ? 0 : containerBoundingRect.top) - clientRect.top - this.height / 2;\n                this.maxTranslate.y =\n                    (useWindowAsScrollContainer\n                        ? _window.innerHeight\n                        : containerBoundingRect.top + containerBoundingRect.height) -\n                        clientRect.top -\n                        this.height / 2;\n            }\n        },\n        handleDragIn(e, sortableGhost, helper) {\n            if (this.hub.isSource(this)) {\n                return;\n            }\n            if (this.dragendTimer) {\n                this.handleDragEnd();\n                clearTimeout(this.dragendTimer);\n                this.dragendTimer = null;\n            }\n            const nodes = this.manager.getRefs();\n            this.index = nodes.length;\n            this.manager.active = { index: this.index };\n            const containerBoundingRect = this.container.getBoundingClientRect();\n            const helperBoundingRect = helper.getBoundingClientRect();\n            this.containerBoundingRect = containerBoundingRect;\n            this.sortableGhost = cloneNode(sortableGhost);\n            this.container.appendChild(this.sortableGhost);\n            const ghostRect = this.sortableGhost.getBoundingClientRect();\n            this.boundingClientRect = ghostRect;\n            this.margin = getElementMargin(this.sortableGhost);\n            this.width = ghostRect.width;\n            this.height = ghostRect.height;\n            // XY coords of the inserted node, relative to the top-left corner of the container\n            this.offsetEdge = getEdgeOffset(this.sortableGhost, this.container);\n            this.intializeOffsets(e, ghostRect);\n            // Move the initialOffset back to the insertion point of the\n            // sortableGhost (end of the list), as if we had started the drag there.\n            this.initialOffset.x += ghostRect.x - helperBoundingRect.x;\n            this.initialOffset.y += ghostRect.y - helperBoundingRect.y;\n            // Turn on dragging\n            this.sorting = true;\n        },\n        handleSortEnd(e) {\n            // Remove the event listeners if the node is still in the DOM\n            if (this.listenerNode) {\n                events.move.forEach((eventName) => \n                // @ts-ignore\n                this.listenerNode.removeEventListener(eventName, this.handleSortMove));\n                events.end.forEach((eventName) => \n                // @ts-ignore\n                this.listenerNode.removeEventListener(eventName, this.handleSortEnd));\n                events.cancel.forEach((eventName) => \n                // @ts-ignore\n                this.listenerNode.removeEventListener(eventName, this.handleSortCancel));\n            }\n            const nodes = this.manager.getRefs();\n            // Remove the helper class(es) early to give it a chance to transition back\n            if (this.helper && this.helperClass) {\n                this.helper.classList.remove(...this.helperClass.split(' '));\n            }\n            // Stop autoscroll\n            if (this.autoscrollInterval)\n                clearInterval(this.autoscrollInterval);\n            this.autoscrollInterval = null;\n            const onEnd = () => {\n                // Remove the helper from the DOM\n                if (this.helper) {\n                    this.helper.remove();\n                    this.helper = null;\n                }\n                if (this.hideSortableGhost && this.sortableGhost) {\n                    this.sortableGhost.style.visibility = '';\n                    this.sortableGhost.style.opacity = '';\n                }\n                resetTransform(nodes);\n                // Update state\n                if (this.hub && !this.hub.isDest(this)) {\n                    this.canceling ? this.hub.cancel() : this.hub.handleSortEnd();\n                }\n                else if (this.canceling) {\n                    this.$emit('sort-cancel', { event: e });\n                }\n                else {\n                    this.$emit('sort-end', {\n                        event: e,\n                        oldIndex: this.index,\n                        newIndex: this.newIndex,\n                    });\n                    this.$emit('update:list', arrayMove(this.list, this.index, this.newIndex));\n                }\n                this.manager.active = null;\n                this._touched = false;\n                this.canceling = false;\n                this.sorting = false;\n            };\n            if (this.transitionDuration || this.draggedSettlingDuration) {\n                this.transitionHelperIntoPlace(nodes, onEnd);\n            }\n            else {\n                onEnd();\n            }\n        },\n        transitionHelperIntoPlace(nodes, cb) {\n            if (this.draggedSettlingDuration === 0 || nodes.length === 0 || !this.helper) {\n                return Promise.resolve();\n            }\n            const indexNode = nodes[this.index].node;\n            let targetX = 0;\n            let targetY = 0;\n            const scrollDifference = {\n                top: window.pageYOffset - this.initialWindowScroll.top,\n                left: window.pageXOffset - this.initialWindowScroll.left,\n            };\n            if (this.hub && !this.hub.isDest(this) && !this.canceling) {\n                const dest = this.hub.getDest();\n                if (!dest)\n                    return;\n                const destIndex = dest.newIndex;\n                const destRefs = dest.manager.getOrderedRefs();\n                const destNode = destIndex < destRefs.length ? destRefs[destIndex].node : dest.sortableGhost;\n                const ancestor = commonOffsetParent(indexNode, destNode);\n                const sourceOffset = getEdgeOffset(indexNode, ancestor);\n                const targetOffset = getEdgeOffset(destNode, ancestor);\n                targetX = targetOffset.left - sourceOffset.left - scrollDifference.left;\n                targetY = targetOffset.top - sourceOffset.top - scrollDifference.top;\n            }\n            else {\n                const newIndexNode = nodes[this.newIndex].node;\n                const deltaScroll = {\n                    left: this.scrollContainer.scrollLeft - this.initialScroll.left + scrollDifference.left,\n                    top: this.scrollContainer.scrollTop - this.initialScroll.top + scrollDifference.top,\n                };\n                targetX = -deltaScroll.left;\n                if (this.translate && this.translate.x > 0) {\n                    // Diff against right edge when moving to the right\n                    targetX +=\n                        newIndexNode.offsetLeft + newIndexNode.offsetWidth - (indexNode.offsetLeft + indexNode.offsetWidth);\n                }\n                else {\n                    targetX += newIndexNode.offsetLeft - indexNode.offsetLeft;\n                }\n                targetY = -deltaScroll.top;\n                if (this.translate && this.translate.y > 0) {\n                    // Diff against the bottom edge when moving down\n                    targetY +=\n                        newIndexNode.offsetTop + newIndexNode.offsetHeight - (indexNode.offsetTop + indexNode.offsetHeight);\n                }\n                else {\n                    targetY += newIndexNode.offsetTop - indexNode.offsetTop;\n                }\n            }\n            const duration = this.draggedSettlingDuration !== null ? this.draggedSettlingDuration : this.transitionDuration;\n            setTransform(this.helper, `translate3d(${targetX}px,${targetY}px, 0)`, `${duration}ms`);\n            // Register an event handler to clean up styles when the transition\n            // finishes.\n            const cleanup = (event) => {\n                if (!event || event.propertyName === 'transform') {\n                    clearTimeout(cleanupTimer);\n                    setTransform(this.helper);\n                    cb();\n                }\n            };\n            // Force cleanup in case 'transitionend' never fires\n            const cleanupTimer = setTimeout(cleanup, duration + 10);\n            this.helper.addEventListener('transitionend', cleanup);\n        },\n        updatePosition(e) {\n            const { lockAxis, lockToContainerEdges } = this.$props;\n            const offset = getPointerOffset(e);\n            const translate = {\n                x: offset.x - this.initialOffset.x,\n                y: offset.y - this.initialOffset.y,\n            };\n            // Adjust for window scroll\n            translate.y -= window.pageYOffset - this.initialWindowScroll.top;\n            translate.x -= window.pageXOffset - this.initialWindowScroll.left;\n            this.translate = translate;\n            if (lockToContainerEdges) {\n                const [minLockOffset, maxLockOffset] = getLockPixelOffsets(this.lockOffset, this.height, this.width);\n                const minOffset = {\n                    x: this.width / 2 - minLockOffset.x,\n                    y: this.height / 2 - minLockOffset.y,\n                };\n                const maxOffset = {\n                    x: this.width / 2 - maxLockOffset.x,\n                    y: this.height / 2 - maxLockOffset.y,\n                };\n                if (this.minTranslate.x && this.maxTranslate.x)\n                    translate.x = limit(this.minTranslate.x + minOffset.x, this.maxTranslate.x - maxOffset.x, translate.x);\n                if (this.minTranslate.y && this.maxTranslate.y)\n                    translate.y = limit(this.minTranslate.y + minOffset.y, this.maxTranslate.y - maxOffset.y, translate.y);\n            }\n            if (lockAxis === 'x') {\n                translate.y = 0;\n            }\n            else if (lockAxis === 'y') {\n                translate.x = 0;\n            }\n            if (this.helper) {\n                this.helper.style['transform'] = `translate3d(${translate.x}px,${translate.y}px, 0)`;\n            }\n        },\n        animateNodes() {\n            const { transitionDuration, hideSortableGhost } = this.$props;\n            const nodes = this.manager.getOrderedRefs();\n            const deltaScroll = {\n                left: this.scrollContainer.scrollLeft - this.initialScroll.left,\n                top: this.scrollContainer.scrollTop - this.initialScroll.top,\n            };\n            const sortingOffset = {\n                left: this.offsetEdge.left + this.translate.x + deltaScroll.left,\n                top: this.offsetEdge.top + this.translate.y + deltaScroll.top,\n            };\n            const scrollDifference = {\n                top: window.pageYOffset - this.initialWindowScroll.top,\n                left: window.pageXOffset - this.initialWindowScroll.left,\n            };\n            this.newIndex = null;\n            for (let i = 0, len = nodes.length; i < len; i++) {\n                const { node } = nodes[i];\n                const index = node.sortableInfo.index;\n                const width = node.offsetWidth;\n                const height = node.offsetHeight;\n                const offset = {\n                    width: this.width > width ? width / 2 : this.width / 2,\n                    height: this.height > height ? height / 2 : this.height / 2,\n                };\n                const translate = {\n                    x: 0,\n                    y: 0,\n                };\n                let { edgeOffset } = nodes[i];\n                // If we haven't cached the node's offsetTop / offsetLeft value\n                if (!edgeOffset) {\n                    nodes[i].edgeOffset = edgeOffset = getEdgeOffset(node, this.container);\n                }\n                // Get a reference to the next and previous node\n                const nextNode = i < nodes.length - 1 && nodes[i + 1];\n                const prevNode = i > 0 && nodes[i - 1];\n                // Also cache the next node's edge offset if needed.\n                // We need this for calculating the animation in a grid setup\n                if (nextNode && !nextNode.edgeOffset) {\n                    nextNode.edgeOffset = getEdgeOffset(nextNode.node, this.container);\n                }\n                // If the node is the one we're currently animating, skip it\n                if (index === this.index) {\n                    /*\n                     * With windowing libraries such as `react-virtualized`, the sortableGhost\n                     * node may change while scrolling down and then back up (or vice-versa),\n                     * so we need to update the reference to the new node just to be safe.\n                     */\n                    if (hideSortableGhost) {\n                        this.sortableGhost = node;\n                        node.style.visibility = 'hidden';\n                        node.style.opacity = '0';\n                    }\n                    continue;\n                }\n                if (transitionDuration) {\n                    node.style['transitionDuration'] = `${transitionDuration}ms`;\n                }\n                if (this._axis.x) {\n                    if (this._axis.y) {\n                        // Calculations for a grid setup\n                        if (index < this.index &&\n                            ((sortingOffset.left + scrollDifference.left - offset.width <= edgeOffset.left &&\n                                sortingOffset.top + scrollDifference.top <= edgeOffset.top + offset.height) ||\n                                sortingOffset.top + scrollDifference.top + offset.height <= edgeOffset.top)) {\n                            // If the current node is to the left on the same row, or above the node that's being dragged\n                            // then move it to the right\n                            translate.x = this.width + this.marginOffset.x;\n                            if (edgeOffset.left + translate.x > this.containerBoundingRect.width - offset.width && nextNode) {\n                                // If it moves passed the right bounds, then animate it to the first position of the next row.\n                                // We just use the offset of the next node to calculate where to move, because that node's original position\n                                // is exactly where we want to go\n                                translate.x = nextNode.edgeOffset.left - edgeOffset.left;\n                                translate.y = nextNode.edgeOffset.top - edgeOffset.top;\n                            }\n                            if (this.newIndex === null) {\n                                this.newIndex = index;\n                            }\n                        }\n                        else if (index > this.index &&\n                            ((sortingOffset.left + scrollDifference.left + offset.width >= edgeOffset.left &&\n                                sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top) ||\n                                sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top + height)) {\n                            // If the current node is to the right on the same row, or below the node that's being dragged\n                            // then move it to the left\n                            translate.x = -(this.width + this.marginOffset.x);\n                            if (edgeOffset.left + translate.x < this.containerBoundingRect.left + offset.width && prevNode) {\n                                // If it moves passed the left bounds, then animate it to the last position of the previous row.\n                                // We just use the offset of the previous node to calculate where to move, because that node's original position\n                                // is exactly where we want to go\n                                translate.x = prevNode.edgeOffset.left - edgeOffset.left;\n                                translate.y = prevNode.edgeOffset.top - edgeOffset.top;\n                            }\n                            this.newIndex = index;\n                        }\n                    }\n                    else {\n                        if (index > this.index && sortingOffset.left + scrollDifference.left + offset.width >= edgeOffset.left) {\n                            translate.x = -(this.width + this.marginOffset.x);\n                            this.newIndex = index;\n                        }\n                        else if (index < this.index &&\n                            sortingOffset.left + scrollDifference.left <= edgeOffset.left + offset.width) {\n                            translate.x = this.width + this.marginOffset.x;\n                            if (this.newIndex == null) {\n                                this.newIndex = index;\n                            }\n                        }\n                    }\n                }\n                else if (this._axis.y) {\n                    if (index > this.index && sortingOffset.top + scrollDifference.top + offset.height >= edgeOffset.top) {\n                        translate.y = -(this.height + this.marginOffset.y);\n                        this.newIndex = index;\n                    }\n                    else if (index < this.index &&\n                        sortingOffset.top + scrollDifference.top <= edgeOffset.top + offset.height) {\n                        translate.y = this.height + this.marginOffset.y;\n                        if (this.newIndex == null) {\n                            this.newIndex = index;\n                        }\n                    }\n                }\n                node.style['transform'] = `translate3d(${translate.x}px,${translate.y}px,0)`;\n            }\n            if (this.newIndex == null) {\n                this.newIndex = this.index;\n            }\n        },\n        autoscroll() {\n            const translate = this.translate;\n            const direction = {\n                x: 0,\n                y: 0,\n            };\n            const speed = {\n                x: 1,\n                y: 1,\n            };\n            const acceleration = {\n                x: 10,\n                y: 10,\n            };\n            if (translate.y >= this.maxTranslate.y - this.height / 2) {\n                direction.y = 1; // Scroll Down\n                speed.y = acceleration.y * Math.abs((this.maxTranslate.y - this.height / 2 - translate.y) / this.height);\n            }\n            else if (translate.x >= this.maxTranslate.x - this.width / 2) {\n                direction.x = 1; // Scroll Right\n                speed.x = acceleration.x * Math.abs((this.maxTranslate.x - this.width / 2 - translate.x) / this.width);\n            }\n            else if (translate.y <= this.minTranslate.y + this.height / 2) {\n                direction.y = -1; // Scroll Up\n                speed.y = acceleration.y * Math.abs((translate.y - this.height / 2 - this.minTranslate.y) / this.height);\n            }\n            else if (translate.x <= this.minTranslate.x + this.width / 2) {\n                direction.x = -1; // Scroll Left\n                speed.x = acceleration.x * Math.abs((translate.x - this.width / 2 - this.minTranslate.x) / this.width);\n            }\n            if (this.autoscrollInterval) {\n                clearInterval(this.autoscrollInterval);\n                this.autoscrollInterval = null;\n            }\n            if (direction.x !== 0 || direction.y !== 0) {\n                this.autoscrollInterval = window.setInterval(() => {\n                    const offset = {\n                        left: 1 * speed.x * direction.x,\n                        top: 1 * speed.y * direction.y,\n                    };\n                    if (this.useWindowAsScrollContainer) {\n                        this._window.scrollBy(offset.left, offset.top);\n                    }\n                    else {\n                        this.scrollContainer.scrollTop += offset.top;\n                        this.scrollContainer.scrollLeft += offset.left;\n                    }\n                    this.translate.x += offset.left;\n                    this.translate.y += offset.top;\n                    this.animateNodes();\n                }, 5);\n            }\n        },\n    },\n});\n\n// Export Sortable Element Handle Directive\nconst HandleDirective = {\n    beforeMount(el) {\n        el.sortableHandle = true;\n    },\n};\n\nconst SlickItem = defineComponent({\n    name: 'SlickItem',\n    mixins: [ElementMixin],\n    props: {\n        tag: {\n            type: String,\n            default: 'div',\n        },\n    },\n    render() {\n        var _a, _b;\n        return h(this.tag, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a));\n    },\n});\n\nconst SlickList = defineComponent({\n    name: 'SlickList',\n    mixins: [ContainerMixin],\n    props: {\n        tag: {\n            type: String,\n            default: 'div',\n        },\n        itemKey: {\n            type: [String, Function],\n            default: 'id',\n        },\n    },\n    render() {\n        var _a, _b;\n        if (this.$slots.item) {\n            return h(this.tag, this.list.map((item, index) => {\n                let key;\n                if (item == null) {\n                    return;\n                }\n                else if (typeof this.itemKey === 'function') {\n                    key = this.itemKey(item);\n                }\n                else if (typeof item === 'object' &&\n                    hasOwnProperty(item, this.itemKey) &&\n                    typeof item[this.itemKey] == 'string') {\n                    key = item[this.itemKey];\n                }\n                else if (typeof item === 'string') {\n                    key = item;\n                }\n                else {\n                    throw new Error('Cannot find key for item, use the item-key prop and pass a function or string');\n                }\n                return h(SlickItem, {\n                    key,\n                    index,\n                }, {\n                    default: () => { var _a, _b; return (_b = (_a = this.$slots).item) === null || _b === void 0 ? void 0 : _b.call(_a, { item, index }); },\n                });\n            }));\n        }\n        return h(this.tag, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a));\n    },\n});\n\nconst DragHandle = defineComponent({\n    props: {\n        tag: {\n            type: String,\n            default: 'span',\n        },\n    },\n    mounted() {\n        this.$el.sortableHandle = true;\n    },\n    render() {\n        var _a, _b;\n        return h(this.tag, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a));\n    },\n});\n\nlet containerIDCounter = 1;\n/**\n * Always allow when dest === source\n * Defer to 'dest.accept()' if it is a function\n * Allow any group in the accept lists\n * Deny any group in the block list\n * Allow the same group by default, this can be overridden with the block prop\n */\nfunction canAcceptElement(dest, source, payload) {\n    if (source.id === dest.id)\n        return true;\n    if (dest.block && dest.block.includes(source.group))\n        return false;\n    if (typeof dest.accept === 'function') {\n        return dest.accept({ dest, source, payload });\n    }\n    if (typeof dest.accept === 'boolean') {\n        return dest.accept;\n    }\n    if (dest.accept && dest.accept.includes(source.group))\n        return true;\n    if (dest.group === source.group)\n        return true;\n    return false;\n}\nfunction findClosestDest({ x, y }, refs, currentDest) {\n    // Quickly check if we are within the bounds of the current destination\n    if (isPointWithinRect({ x, y }, currentDest.container.getBoundingClientRect())) {\n        return currentDest;\n    }\n    let closest = null;\n    let minDistance = Infinity;\n    for (let i = 0; i < refs.length; i++) {\n        const ref = refs[i];\n        const rect = ref.container.getBoundingClientRect();\n        const isWithin = isPointWithinRect({ x, y }, rect);\n        if (isWithin) {\n            // If we are within another destination, stop here\n            return ref;\n        }\n        const center = getRectCenter(rect);\n        const distance = getDistance(x, y, center.x, center.y);\n        if (distance < minDistance) {\n            closest = ref;\n            minDistance = distance;\n        }\n    }\n    // Try to guess the closest destination\n    return closest;\n}\nclass SlicksortHub {\n    constructor() {\n        this.helper = null;\n        this.ghost = null;\n        this.refs = [];\n        this.source = null;\n        this.dest = null;\n    }\n    getId() {\n        return '' + containerIDCounter++;\n    }\n    isSource({ id }) {\n        var _a;\n        return ((_a = this.source) === null || _a === void 0 ? void 0 : _a.id) === id;\n    }\n    getSource() {\n        return this.source;\n    }\n    isDest({ id }) {\n        var _a;\n        return ((_a = this.dest) === null || _a === void 0 ? void 0 : _a.id) === id;\n    }\n    getDest() {\n        return this.dest;\n    }\n    addContainer(ref) {\n        this.refs.push(ref);\n    }\n    removeContainer(ref) {\n        this.refs = this.refs.filter((c) => c.id !== ref.id);\n    }\n    sortStart(ref) {\n        this.source = ref;\n        this.dest = ref;\n    }\n    handleSortMove(e, payload) {\n        var _a, _b, _c, _d;\n        const dest = this.dest;\n        const source = this.source;\n        if (!dest || !source)\n            return;\n        const refs = this.refs;\n        const pointer = getPointerOffset(e, 'client');\n        const newDest = findClosestDest(pointer, refs, dest) || dest;\n        if (dest.id !== newDest.id && canAcceptElement(newDest, source, payload)) {\n            this.dest = newDest;\n            dest.handleDragOut();\n            newDest.handleDragIn(e, this.ghost, this.helper);\n        }\n        if (dest.id !== ((_a = this.source) === null || _a === void 0 ? void 0 : _a.id)) {\n            (_b = this.dest) === null || _b === void 0 ? void 0 : _b.updatePosition(e);\n            (_c = this.dest) === null || _c === void 0 ? void 0 : _c.animateNodes();\n            (_d = this.dest) === null || _d === void 0 ? void 0 : _d.autoscroll();\n        }\n    }\n    handleSortEnd() {\n        var _a, _b, _c, _d;\n        if (((_a = this.source) === null || _a === void 0 ? void 0 : _a.id) === ((_b = this.dest) === null || _b === void 0 ? void 0 : _b.id))\n            return;\n        const payload = (_c = this.source) === null || _c === void 0 ? void 0 : _c.handleDropOut();\n        (_d = this.dest) === null || _d === void 0 ? void 0 : _d.handleDropIn(payload);\n        this.reset();\n    }\n    reset() {\n        this.source = null;\n        this.dest = null;\n        this.helper = null;\n        this.ghost = null;\n    }\n    cancel() {\n        var _a;\n        (_a = this.dest) === null || _a === void 0 ? void 0 : _a.handleDragEnd();\n        this.reset();\n    }\n}\n\nconst plugin = {\n    install(app) {\n        app.directive('drag-handle', HandleDirective);\n        app.provide('SlicksortHub', new SlicksortHub());\n    },\n};\n\nexport { ContainerMixin, DragHandle, ElementMixin, HandleDirective, SlickItem, SlickList, arrayMove, plugin };\n","import { getIconFromExt, SvgIcon } from './icons';\nimport utils from './utils';\nimport { RGBA, ImageThumbnail, VideoThumbnail } from './utils';\n\ninterface Dimensions {\n  height: number;\n  width: number;\n}\n\ninterface Options {\n  accept?: string;\n  maxSize?: string;\n  read: boolean;\n  thumbnailSize?: number;\n  averageColor?: boolean;\n  withCredentials?: boolean;\n}\n\ninterface ErrorText {\n  common?: string;\n  type?: string;\n  size?: string;\n  upload?: string;\n}\n\ninterface ErrorFlags {\n  common?: boolean;\n  type?: boolean;\n  size?: boolean;\n  upload?: false | string;\n}\n\ninterface RawFileRecord {\n  url: string | undefined;\n  urlResized: string | null;\n  src: string;\n  name: string;\n  lastModified: number;\n  sizeText: string;\n  size: number;\n  type: string;\n  ext: string;\n  color: string;\n  file: File;\n  progress: number;\n  error?: false | ErrorFlags;\n  dimensions: Dimensions;\n  videoThumbnail: string;\n  imageColor: RGBA;\n  customName: string;\n  upload: UploadData;\n}\n\ninterface DummyFile {\n  name: string;\n  size: number;\n  type: string;\n  lastModified: number;\n  lastModifiedDate: Date;\n}\n\ninterface UploadData {\n  data: any;\n  error: string | false;\n}\n\nexport type { Dimensions, ErrorText, Options, RawFileRecord };\n\nclass FileRecord {\n  public static getFromRaw(\n    rawFileRecord: RawFileRecord,\n    options: Options,\n    isSync: boolean,\n  ): Promise<FileRecord> | FileRecord {\n    const fileRecord = new FileRecord(rawFileRecord, options);\n    const promise = fileRecord.setUrl(rawFileRecord.url as string);\n    if (isSync) {\n      return fileRecord;\n    }\n    return promise;\n  }\n\n  public static fromRaw(rawFileRecord: RawFileRecord, options: Options): Promise<FileRecord> {\n    return FileRecord.getFromRaw(rawFileRecord, options, false) as Promise<FileRecord>;\n  }\n\n  public static fromRawSync(rawFileRecord: RawFileRecord, options: Options): FileRecord {\n    return FileRecord.getFromRaw(rawFileRecord, options, true) as FileRecord;\n  }\n\n  public static fromRawArray(rawFileRecords: RawFileRecord[], options: Options): Promise<FileRecord[]> {\n    const promises: Array<Promise<FileRecord>> = [];\n    for (const rawFileRecord of rawFileRecords) {\n      promises.push(FileRecord.fromRaw(rawFileRecord, options));\n    }\n    return Promise.all(promises);\n  }\n\n  public static fromRawArraySync(rawFileRecords: RawFileRecord[], options: Options): FileRecord[] {\n    const fileRecords: Array<FileRecord> = [];\n    for (const rawFileRecord of rawFileRecords) {\n      fileRecords.push(FileRecord.fromRawSync(rawFileRecord, options));\n    }\n    return fileRecords;\n  }\n\n  public static toRawArray(fileRecords: FileRecord[]): RawFileRecord[] {\n    const rawFileRecords: RawFileRecord[] = [];\n    for (const fileRecord of fileRecords) {\n      rawFileRecords.push(fileRecord.toRaw());\n    }\n    return rawFileRecords;\n  }\n\n  public static readFile(fileRecord: FileRecord): Promise<FileRecord> {\n    return new Promise((resolve, reject) => {\n      if (!fileRecord.read) {\n        fileRecord.setUrl(null).then(\n          () => {\n            resolve(fileRecord);\n          },\n          (err) => {\n            // ignore error\n            resolve(fileRecord);\n          }\n        );\n        return;\n      }\n      utils.getDataURL(fileRecord.file).then((dataUrl) => {\n        fileRecord.setUrl(dataUrl).then(() => {\n          resolve(fileRecord);\n        }, reject);\n      }, reject);\n    });\n  }\n\n  public static readFiles(fileRecords: FileRecord[]): Promise<FileRecord[]> {\n    const promises: Array<Promise<FileRecord>> = [];\n    for (const fileRecord of fileRecords) {\n      promises.push(FileRecord.readFile(fileRecord));\n    }\n    return Promise.all(promises);\n  }\n\n  public urlValue: null | string = null;\n  public urlResized: null | string = null;\n  public image: HTMLImageElement | {} = {};\n  public isPlayingAv: boolean = false;\n\n  public oldFileName: string | null = null;\n  public oldCustomName: string | null = null;\n  public upload: UploadData = { data: null, error: false };\n\n  public raw: RawFileRecord;\n  public progressInternal: number;\n  public accept?: string;\n  public dimensions: Dimensions;\n  public error: false | ErrorFlags;\n  public file: File;\n  public height: undefined | number | string;\n  public width: undefined | number | string;\n  public id: string;\n  public imageColor?: RGBA;\n  public lastKnownSrc: null | string;\n  public maxSize?: string;\n  public options: Options;\n  public read: boolean;\n  public thumbnailSize: number;\n  public videoThumbnail: any;\n  public customName: any;\n  public xhr?: XMLHttpRequest;\n  public xhrQueue?: () => any;\n  public stopAv?: (() => any) | null;\n  public tusUpload?: any;\n  public calculateAverageColor: boolean;\n\n  public constructor(data: RawFileRecord, options: Options) {\n    this.urlValue = null;\n    this.urlResized = null;\n    this.lastKnownSrc = null;\n    this.image = {};\n    this.isPlayingAv = false;\n    this.oldFileName = null;\n    this.oldCustomName = null;\n\n    this.raw = data;\n    this.file = data.file instanceof File ? data.file : (this.createDummyFile(data) as any);\n    this.progressInternal = !isNaN(data.progress as number) ? (data.progress as number) : 0;\n    // this.width = FileRecord.defaultWidth;\n    // this.height = FileRecord.defaultHeight;\n    this.thumbnailSize = options.thumbnailSize || 360;\n    this.read = !!options.read;\n    this.dimensions = data.dimensions || { width: 0, height: 0 };\n    this.dimensions.width = this.dimensions.width || 0;\n    this.dimensions.height = this.dimensions.height || 0;\n    this.error = data.error || false;\n    this.options = options;\n    this.maxSize = options.maxSize;\n    this.accept = options.accept;\n    this.id = Math.random() + ':' + new Date().getTime();\n    this.videoThumbnail = data.videoThumbnail;\n    this.imageColor = data.imageColor;\n    this.customName = data.customName;\n    this.calculateAverageColor = options.averageColor !== undefined ? options.averageColor : true;\n    this.validate();\n  }\n\n  public createDummyFile(data: RawFileRecord): DummyFile {\n    const file: DummyFile = {} as DummyFile;\n    file.lastModified = data.lastModified;\n    const d = new Date();\n    if (file.lastModified) {\n      d.setTime(file.lastModified);\n    }\n    file.lastModifiedDate = d;\n    file.name = data.name;\n    file.size = data.size;\n    file.type = data.type;\n    return file;\n  }\n\n  public hasProgress(): boolean {\n    return !isNaN(this.progressInternal); // && this._progress <= 100;\n  }\n\n  progress(value: number): void;\n  progress(): number;\n  public progress(value?: number): number | void {\n    if (value !== undefined) {\n      this.progressInternal = value;\n      return;\n    }\n    return this.progressInternal;\n  }\n\n  url(value: string): string | undefined | Promise<this>;\n  url(): string | undefined;\n  public url(value?: string): string | undefined | Promise<this> {\n    if (value !== undefined) {\n      return this.setUrl(value);\n    }\n    return this.urlValue || undefined;\n  }\n\n  public src(): string {\n    if (this.isImage()) {\n      return this.urlResized || this.urlValue || (this.file as any).url;\n    }\n    if (this.isPlayableVideo()) {\n      return this.videoThumbnail || '';\n    }\n    return '';\n  }\n\n  public size(): string {\n    if (!this.file) {\n      return '';\n    }\n    return utils.getSizeFormatted(this.file.size);\n  }\n\n  public ext(): string {\n    if (this.file && this.file.name.indexOf('.') !== -1) {\n      return (this.file.name as any).split('.').pop();\n    }\n    return '?';\n    // return this.file.type.split('/').shift();\n  }\n\n  public name(withoutExt?: boolean): string {\n    const ext = this.ext();\n    if (this.customName) {\n      return this.customName + (withoutExt ? '' : ext !== '?' ? '.' + ext : '');\n    }\n    const name = this.file && this.file.name;\n    if (withoutExt) {\n      if (ext !== '?') {\n        return name.substr(0, name.length - (ext.length + 1));\n      }\n    }\n    return name;\n  }\n\n  public isDarkColor(): boolean {\n    if (this.imageColor) {\n      const rgb = this.imageColor;\n      const darkPoint = 20;\n      return rgb[0] <= darkPoint && rgb[1] <= darkPoint && rgb[2] <= darkPoint;\n    }\n    return false;\n  }\n\n  public color(): string {\n    if (this.imageColor) {\n      const rgb = this.imageColor;\n      return 'rgb(' + rgb[0] + ', ' + rgb[1] + ', ' + rgb[2] + ')';\n    }\n    if (this.isImage()) {\n      return 'transparent';\n    }\n    const ext = this.ext();\n    const svgIcon = this.icon();\n    // var svgIcon = getIconFromExt(ext);\n    if (svgIcon.color) {\n      return svgIcon.color;\n    }\n    return utils.getColorForText(ext);\n  }\n\n  public isImage(): boolean {\n    return this.file && this.file.type !== 'image/x-wmf' && !!this.file.type.match(/image((?!vnd).)*$/i);\n  }\n\n  public isVideo(): boolean {\n    return this.file && this.file.type.indexOf('video') !== -1;\n  }\n\n  public isPlayableVideo(): boolean {\n    return this.icon().category === 'video-playable';\n  }\n\n  public isAudio(): boolean {\n    return this.file && this.file.type.indexOf('audio') !== -1;\n  }\n\n  public isPlayableAudio(): boolean {\n    return this.icon().category === 'audio-playable';\n  }\n\n  public isText(): boolean {\n    return this.file && this.file.type.indexOf('text') !== -1;\n  }\n\n  public setUrl(url: string | null): Promise<this> {\n    this.urlValue = url;\n    return new Promise((resolve, reject) => {\n      if (this.isImage()) {\n        this.resizeImage().then(\n          () => {\n            resolve(this);\n          },\n          (err) => {\n            resolve(this);\n          }\n        );\n        return;\n      }\n      resolve(this);\n    });\n  }\n\n  public imageResized(resized: ImageThumbnail | null) {\n    if (!resized) {\n      return;\n    }\n    this.urlResized = resized.url;\n    this.image = resized.image;\n    if (resized.image && resized.image.width && resized.image.height) {\n      this.dimensions.width = resized.image.width;\n      this.dimensions.height = resized.image.height;\n    }\n    this.lastKnownSrc = this.urlResized;\n    this.imageColor = resized.color;\n  }\n\n  public resizeImage(): Promise<this> {\n    return new Promise((resolve, reject) => {\n      utils\n        .resizeImage(this.thumbnailSize, this.file, this.urlValue as string, this.calculateAverageColor)\n        .then((resized) => {\n          this.imageResized(resized);\n          resolve(this);\n        })\n        .catch(reject);\n    });\n  }\n\n  public icon(): SvgIcon {\n    const ext = this.ext();\n    const svgIcon = getIconFromExt(ext);\n    return svgIcon;\n  }\n\n  public getErrorMessage(errorText?: ErrorText): string {\n    const error = this.error;\n    if (!error) {\n      return '';\n    }\n    errorText = errorText || {};\n    errorText = {\n      common: errorText.common || 'Invalid file.',\n      type: errorText.type || 'Invalid file type.',\n      size: errorText.size || 'Files should not exceed ' + this.maxSize + ' in size',\n    };\n    if (error.type) {\n      return errorText.type as string;\n    } else if (error.size) {\n      return errorText.size as string;\n    } else if (error.upload) {\n      return this.upload.error ? this.upload.error : error.upload;\n    }\n    return errorText.common as string;\n  }\n\n  public toRaw(): RawFileRecord {\n    const raw = this.raw || ({} as RawFileRecord);\n    raw.url = this.url();\n    raw.urlResized = this.urlResized;\n    raw.src = this.src();\n    raw.name = this.name();\n    raw.lastModified = this.file.lastModified;\n    raw.sizeText = this.size();\n    raw.size = this.file.size;\n    raw.type = this.file.type;\n    raw.ext = this.ext();\n    raw.color = this.color();\n    raw.file = this.file;\n    raw.progress = this.progress(); // pass it as a function\n    raw.upload = this.upload;\n    if (!('error' in raw)) {\n      Object.defineProperty(raw, 'error', {\n        get: () => {\n          return this.error;\n        },\n      });\n    }\n    raw.dimensions = this.dimensions;\n    return raw;\n  }\n\n  public validate(): void {\n    const validType = utils.validateType(this.file, this.accept);\n    const validSize = utils.validateSize(this.file, this.maxSize as string);\n    if (!validType || !validSize) {\n      this.error = {\n        type: !validType,\n        size: !validSize,\n      };\n    } else {\n      this.error = false;\n    }\n  }\n}\n\nexport default FileRecord;\n","export type ConfigureFn = (request: XMLHttpRequest) => any;\nexport interface AjaxResponse {\n  data: any;\n  status: number;\n  statusText: string;\n  headers: string;\n  request: XMLHttpRequest;\n}\nexport type AjaxRequestData = FormData | any;\nexport interface AjaxError extends Error {\n  error: true;\n  code: string;\n  request: XMLHttpRequest;\n  response?: AjaxResponse;\n}\n\n/* inspired by axios */\nclass AjaxRequest {\n  public createError(\n    message: string,\n    code: string | null,\n    request: XMLHttpRequest,\n    response?: AjaxResponse\n  ): AjaxError {\n    const error: AjaxError = new Error(message) as AjaxError;\n    error.error = true;\n    if (code) {\n      error.code = code;\n    }\n    error.request = request;\n    error.response = response;\n    return error;\n  }\n\n  public settle(resolve: any, reject: any, response: AjaxResponse) {\n    const validateStatus = (status: number) => {\n      return status >= 200 && status < 300;\n    };\n    // Note: status is not exposed by XDomainRequest\n    if (!response.status || !validateStatus || validateStatus(response.status)) {\n      resolve(response);\n    } else {\n      reject(this.createError('Request failed with status code ' + response.status, null, response.request, response));\n    }\n  }\n\n  public request(\n    method: string,\n    url: string,\n    formData: AjaxRequestData | null = null,\n    configureFn?: ConfigureFn\n  ): Promise<AjaxResponse> {\n    return new Promise((resolve, reject) => {\n      // tslint:disable-next-line\n      let request = new XMLHttpRequest();\n      const loadEvent = 'onreadystatechange';\n\n      request.open(method, url, true);\n\n      // Listen for ready state\n      request[loadEvent] = () => {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n\n        // Prepare the response\n        const responseHeaders = request.getAllResponseHeaders();\n        let responseData: any = request.responseText;\n        const contentType = request.getResponseHeader('Content-Type');\n        if (contentType && contentType.indexOf('application/json') !== -1) {\n          responseData = JSON.parse(responseData);\n        } else {\n          try {\n            responseData = JSON.parse(responseData);\n          } catch (e) {\n            /* ignore, possibly non json response */\n          }\n        }\n        const response: AjaxResponse = {\n          data: responseData,\n          // IE sends 1223 instead of 204 (https://github.com/axios/axios/issues/201)\n          status: request.status === 1223 ? 204 : request.status,\n          statusText: request.status === 1223 ? 'No Content' : request.statusText,\n          headers: responseHeaders,\n          request,\n        };\n\n        this.settle(resolve, reject, response);\n\n        // Clean up request\n        (request as any) = null;\n      };\n\n      // Handle browser request cancellation (as opposed to a manual cancellation)\n      request.onabort = () => {\n        if (!request) {\n          return;\n        }\n\n        reject(this.createError('Request aborted', 'ECONNABORTED', request));\n\n        // Clean up request\n        (request as any) = null;\n      };\n\n      // Handle low level network errors\n      request.onerror = () => {\n        // Real errors are hidden from us by the browser\n        // onerror should only fire if it's a network error\n        reject(this.createError('Network Error', null, request));\n\n        // Clean up request\n        (request as any) = null;\n      };\n\n      // Handle timeout\n      request.ontimeout = () => {\n        reject(this.createError('timeout exceeded', 'ECONNABORTED', request));\n\n        // Clean up request\n        (request as any) = null;\n      };\n\n      // // Handle progress if needed\n      // if (typeof config.onDownloadProgress === 'function') {\n      //   request.addEventListener('progress', config.onDownloadProgress);\n      // }\n\n      // Not all browsers support upload events\n      // if (typeof progressCallback === 'function' && request.upload) {\n      //   request.upload.addEventListener('progress', progressCallback);\n      // }\n\n      if (typeof configureFn === 'function') {\n        configureFn(request);\n      }\n\n      request.send(formData);\n    });\n  }\n\n  public post(url: string, formData: AjaxRequestData, configureFn?: ConfigureFn) {\n    return this.request('POST', url, formData, configureFn);\n  }\n\n  public delete(url: string, formData: AjaxRequestData, configureFn?: ConfigureFn) {\n    return this.request('DELETE', url, formData, configureFn);\n  }\n\n  public put(url: string, formData: AjaxRequestData, configureFn?: ConfigureFn) {\n    return this.request('PUT', url, formData, configureFn);\n  }\n}\n\nexport default new AjaxRequest();\n","import ajax from './ajax-request';\nimport { ConfigureFn, AjaxResponse, AjaxError } from './ajax-request';\nimport FileRecord from './file-record';\n\ntype ProgressFn = (event: ProgressEvent) => void;\nexport type CreateFormDataFn = (fileRecord: FileRecord) => FormData;\n\nexport interface TusOptions {\n  retryDelays?: number[];\n  metadata?: any;\n}\n\nexport type TusOptionsFn = (fileRecord: FileRecord) => TusOptions;\n\nclass UploadHelper {\n  public addHeaders(xhr: XMLHttpRequest, headers: object): XMLHttpRequest {\n    xhr.setRequestHeader('Accept', 'application/json');\n    if (headers) {\n      for (const key in headers) {\n        if (headers.hasOwnProperty(key)) {\n          xhr.setRequestHeader(key, (headers as any)[key]);\n        }\n      }\n    }\n    return xhr;\n  }\n\n  public doUpload(\n    url: string,\n    headers: object,\n    formData: FormData,\n    progressCallback: ProgressFn,\n    configureFn?: ConfigureFn\n  ): Promise<AjaxResponse> {\n    return ajax.post(url, formData, (xhr) => {\n      this.addHeaders(xhr, headers);\n      xhr.upload.addEventListener('progress', progressCallback, false);\n      if (typeof configureFn === 'function') {\n        configureFn(xhr);\n      }\n    });\n  }\n\n  public doDeleteUpload(\n    url: string,\n    headers: object,\n    uploadData: any,\n    configureFn?: ConfigureFn\n  ): Promise<AjaxResponse> {\n    if (typeof uploadData !== 'string') {\n      uploadData = JSON.stringify(uploadData);\n    }\n    return ajax.delete(url, uploadData, (xhr) => {\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      this.addHeaders(xhr, headers);\n      if (typeof configureFn === 'function') {\n        configureFn(xhr);\n      }\n    });\n  }\n\n  public doUpdateUpload(\n    url: string,\n    headers: object,\n    uploadData: any,\n    configureFn?: ConfigureFn\n  ): Promise<AjaxResponse> {\n    if (typeof uploadData !== 'string') {\n      uploadData = JSON.stringify(uploadData);\n    }\n    return ajax.put(url, uploadData, (xhr) => {\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      this.addHeaders(xhr, headers);\n      if (typeof configureFn === 'function') {\n        configureFn(xhr);\n      }\n    });\n  }\n\n  // doUploadAxios(axios, formData, progressCallback){\n  //   return axios.post('/upload', formData, {\n  //     onUploadProgress: progressCallback,\n  //   });\n  // }\n\n  // doDeleteUploadAxios(axios, data, configureFn){\n  //   return axios.delete('/upload', data, {\n  //   });\n  // }\n\n  public prepareUploadError(fileRecord: FileRecord, err: AjaxError, timeout?: number) {\n    let errorText = err.message;\n    if (err.response && err.response.data) {\n      try {\n        const errorMsg = err.response.data.error || JSON.parse(err.response.data).error;\n        errorText = errorMsg;\n      } catch (e) {\n        // ignore\n      }\n    }\n    if (!fileRecord.error) {\n      fileRecord.error = {};\n    }\n    fileRecord.error.upload = errorText;\n    fileRecord.upload.data = undefined;\n    fileRecord.upload.error = errorText;\n    if (timeout) {\n      window.setTimeout(() => {\n        if (!fileRecord.error) {\n          fileRecord.error = {};\n        }\n        fileRecord.error.upload = false;\n        if (!fileRecord.error.size && !fileRecord.error.type) {\n          fileRecord.error = false;\n        }\n      }, timeout);\n    }\n  }\n\n  public upload(\n    url: string,\n    headers: object,\n    fileRecords: FileRecord[],\n    createFormData?: CreateFormDataFn,\n    progressFn?: (progress: number) => void,\n    configureFn?: ConfigureFn\n  ) {\n    let updateOverallProgress = () => {\n      /* no op */\n    };\n    if (progressFn) {\n      updateOverallProgress = () => {\n        let prgTotal = 0;\n        for (const fileRecord of fileRecords) {\n          prgTotal += fileRecord.progress() as number;\n        }\n        progressFn(prgTotal / fileRecords.length);\n      };\n    }\n    const promises: Array<Promise<AjaxResponse | AjaxError>> = [];\n    let failedUploadsCount = 0;\n    for (const fileRecord of fileRecords) {\n      let formData;\n      if (typeof createFormData === 'function') {\n        formData = createFormData(fileRecord);\n      } else {\n        formData = new FormData();\n        formData.append('file', fileRecord.file as File);\n        formData.append('filename', fileRecord.name());\n      }\n      const promise = this.doUpload(\n        url,\n        headers,\n        formData,\n        (progressEvent) => {\n          const percentCompleted = (progressEvent.loaded * 100) / progressEvent.total;\n          // do not complete until promise resolved\n          fileRecord.progress(percentCompleted >= 100 ? 99.9999 : percentCompleted);\n          updateOverallProgress();\n        },\n        (xhr) => {\n          fileRecord.xhr = xhr;\n          if (typeof configureFn === 'function') {\n            configureFn(xhr);\n          }\n        }\n      );\n      promises.push(\n        new Promise((resolve, reject) => {\n          promise.then(\n            (response) => {\n              delete fileRecord.xhr;\n              fileRecord.upload.data = response.data;\n              fileRecord.upload.error = false;\n              fileRecord.progress(100);\n              if (fileRecord.xhrQueue) {\n                fileRecord.xhrQueue();\n                delete fileRecord.xhrQueue;\n              }\n              resolve(response);\n            } /* */,\n            (err) => {\n              this.prepareUploadError(fileRecord, err);\n              resolve(err);\n              failedUploadsCount++;\n            } /* */\n          );\n        })\n      );\n    }\n    // return Promise.all(promises);\n    return new Promise((resolve, reject) => {\n      Promise.all(promises).then((responses) => {\n        if (failedUploadsCount === promises.length) {\n          // all uploads failed\n          reject(responses);\n          return;\n        }\n        resolve(responses);\n      }, reject);\n    });\n  }\n\n  public deleteUpload(\n    url: string,\n    headers: object,\n    fileRecord: FileRecord,\n    uploadData?: any,\n    configureFn?: ConfigureFn\n  ) {\n    return new Promise((resolve, reject) => {\n      if (fileRecord.xhr) {\n        fileRecord.xhr.abort();\n      }\n      if (uploadData === undefined) {\n        uploadData = fileRecord.upload.data;\n      }\n      if (uploadData) {\n        this.doDeleteUpload(url, headers, uploadData, (xhr) => {\n          if (typeof configureFn === 'function') {\n            configureFn(xhr);\n          }\n        }).then(\n          (result) => {\n            resolve(result);\n          },\n          (err) => {\n            this.prepareUploadError(fileRecord, err);\n            reject(err);\n          }\n        );\n      }\n    });\n  }\n\n  public updateUpload(\n    url: string,\n    headers: object,\n    fileRecord: FileRecord,\n    uploadData: any,\n    configureFn?: ConfigureFn\n  ) {\n    return new Promise((resolve, reject) => {\n      if (fileRecord.xhr) {\n        // probably updated while being uploaded.\n        fileRecord.xhrQueue = () => {\n          this.updateUpload(url, headers, fileRecord, uploadData);\n        };\n        return resolve(undefined);\n      }\n      if (uploadData === undefined) {\n        uploadData = fileRecord.upload.data || {};\n        uploadData.old_filename = fileRecord.oldFileName;\n        uploadData.filename = fileRecord.name();\n      }\n      if (uploadData) {\n        this.doUpdateUpload(url, headers, uploadData, (xhr) => {\n          if (typeof configureFn === 'function') {\n            configureFn(xhr);\n          }\n        }).then(\n          (response) => {\n            fileRecord.upload.data = response.data;\n            fileRecord.upload.error = false;\n            resolve(response);\n          },\n          (err) => {\n            this.prepareUploadError(fileRecord, err);\n            reject(err);\n          }\n        );\n      }\n    });\n  }\n\n  public doTusUpload(\n    tus: any,\n    url: string,\n    fileRecord: FileRecord,\n    headers: object,\n    progressCallback: ProgressFn,\n    tusOptionsFn?: TusOptionsFn,\n    uploadWithCredentials?: boolean\n  ) {\n    const tusOptions: TusOptions = tusOptionsFn ? tusOptionsFn(fileRecord) : {};\n    return new Promise((resolve, reject) => {\n      if (!tus) {\n        return reject(new Error('tus required. Please install tus-js-client'));\n      }\n      // https://github.com/tus/tus-js-client\n      // Create a new tus upload\n      const file = fileRecord.file;\n      const upload = new tus.Upload(file, {\n        endpoint: url,\n        headers,\n        retryDelays: tusOptions.retryDelays ? tusOptions.retryDelays : [0, 3000, 5000, 10000, 20000],\n        metadata: tusOptions.metadata\n          ? tusOptions.metadata\n          : {\n              filename: file.name,\n              filetype: file.type,\n            },\n        onError(error: any) {\n          reject(error);\n          // console.log(\"Failed because: \" + error)\n        },\n        onProgress(bytesUploaded: number, bytesTotal: number) {\n          const event = { loaded: bytesUploaded, total: bytesTotal } as ProgressEvent;\n          progressCallback(event);\n        },\n        onSuccess() {\n          resolve(upload);\n        },\n        onBeforeRequest: function (req: any) {\n          const xhr: XMLHttpRequest = req.getUnderlyingObject();\n          xhr.withCredentials = uploadWithCredentials === true;\n        },\n      });\n      fileRecord.tusUpload = upload;\n      // Start the upload\n      upload.start();\n    });\n  }\n\n  public tusUpload(\n    tus: any,\n    url: string,\n    headers: object,\n    fileRecords: FileRecord[],\n    progressFn?: (progress: number) => void,\n    tusOptionsFn?: TusOptionsFn,\n    uploadWithCredentials?: boolean\n  ) {\n    let updateOverallProgress = () => {\n      /* no op */\n    };\n    if (progressFn) {\n      updateOverallProgress = () => {\n        let prgTotal = 0;\n        for (const fileRecord of fileRecords) {\n          prgTotal += fileRecord.progress() as number;\n        }\n        progressFn(prgTotal / fileRecords.length);\n      };\n    }\n    const promises = [];\n    for (const fileRecord of fileRecords) {\n      const promise = this.doTusUpload(\n        tus,\n        url,\n        fileRecord,\n        headers,\n        (progressEvent: ProgressEvent) => {\n          const percentCompleted = (progressEvent.loaded * 100) / progressEvent.total;\n          // do not complete until promise resolved\n          fileRecord.progress(percentCompleted >= 100 ? 99.9999 : percentCompleted);\n          updateOverallProgress();\n        },\n        tusOptionsFn,\n        uploadWithCredentials\n      );\n      promise.then(\n        (response) => {\n          // delete fileRecord.tusUpload;\n          fileRecord.progress(100);\n        },\n        (err) => {\n          this.prepareUploadError(fileRecord, err);\n        }\n      );\n      promises.push(promise);\n    }\n    return Promise.all(promises);\n  }\n\n  public tusDeleteUpload(tus: any, url: string, headers: object, fileRecord: FileRecord) {\n    return new Promise((resolve, reject) => {\n      if (!tus) {\n        return reject('tus required');\n      }\n      if (!fileRecord.tusUpload) {\n        return resolve(undefined);\n      }\n      // const shouldTerminate = true;\n      const abort = (shouldTerminate: boolean) => {\n        return new Promise((res, rej) => {\n          fileRecord.tusUpload.abort(shouldTerminate, (err: any) => {\n            if (err) {\n              this.prepareUploadError(fileRecord, err);\n              rej(err);\n              return;\n            }\n            res(undefined);\n          });\n        });\n      };\n      abort(false).then(() => {\n        window.setTimeout(() => {\n          abort(true).then(resolve, reject);\n        }, 1000);\n      });\n    });\n  }\n}\n\nexport default new UploadHelper();\n","var plugins = {\n  tus: null as any,\n};\n\nexport default plugins;","<template>\n  <div\n    :id=\"'vfa-' + uniqueId\"\n    :class=\"[\n      'is-sortable-' + (isSortable ? 'enabled' : 'disabled'),\n      {\n        'is-sortable-hold': sortable === 'hold',\n        'is-sortable-handle': sortable === 'handle',\n        'is-sortable-immediately': sortable === true,\n        'is-sorting': isSorting,\n        'is-sorting-active': isSortingActive,\n        'is-drag-over': isDragging,\n        'is-disabled': disabled === true,\n        'is-readonly': readonly === true,\n        'is-drag-valid': !(disabled === true || readonly === true || (hasMultiple && !canAddMore)),\n      },\n      'theme-' + theme,\n    ]\"\n    @dragover=\"dragOver\"\n    @dragenter=\"dragEnter\"\n    @dragleave=\"dragLeave\"\n    @drop=\"drop\"\n  >\n    <slot name=\"before-outer\" />\n    <div\n      class=\"grid-block-wrapper vue-file-agent file-input-wrapper\"\n      :class=\"{\n        'is-compact': !!compact,\n        'is-single': !hasMultiple,\n        'has-multiple': hasMultiple,\n        'no-meta': meta === false,\n      }\"\n    >\n      <slot name=\"before-inner\" />\n      <canvas ref=\"thumbnailCanvas\" style=\"position: fixed; visibility: hidden; z-index: -3\" />\n      <div\n        v-if=\"overallProgress\"\n        class=\"overall-progress\"\n        :class=\"{'overall-progress-full': overallProgress >= 100}\"\n      >\n        <div class=\"overall-progress-bar\" :style=\"{width: overallProgress + '%'}\" />\n        <div class=\"overall-progress-left\" :style=\"{width: 100 - overallProgress + '%'}\" />\n      </div>\n\n      <component\n        :is=\"isSortable ? 'SlickList' : 'VueFileList'\"\n        v-model:list=\"fileRecords\"\n        :axis=\"theme == 'list' ? 'y' : 'xy'\"\n        :append-to=\"'#vfa-' + uniqueId + ' .vue-file-agent'\"\n        :transition-duration=\"transitionDuration\"\n        :press-delay=\"sortable === 'hold' ? 200 : 0\"\n        :use-drag-handle=\"sortable === 'handle'\"\n        :helper-class=\"'active-sorting-item'\"\n        @sort-start=\"sortStart()\"\n        @sort-end=\"sortEnd($event)\"\n      >\n        <transition-group name=\"grid-box\" tag=\"div\" class=\"\">\n          <component\n            :is=\"isSortable ? 'SlickItem' : 'VueFileListItem'\"\n            v-for=\"(element, index) in fileRecords\"\n            :key=\"element.id\"\n            class=\"file-preview-wrapper grid-box-item grid-block\"\n            :index=\"index\"\n          >\n            <slot name=\"file-preview-before\" :file-record=\"element\" :file-data=\"element\" />\n            <slot name=\"file-preview\" :file-record=\"element\" :file-data=\"element\">\n              <VueFilePreview\n                :average-color=\"averageColor\"\n                :file-record=\"element\"\n                :deletable=\"isDeletable\"\n                :editable=\"editable === true\"\n                :linkable=\"linkable === true\"\n                :error-text=\"errorText\"\n                :disabled=\"disabled\"\n                :thumbnail-size=\"thumbnailSize\"\n                :with-credentials=\"withCredentials\"\n                class=\"\"\n                @remove=\"removeFileRecord($event)\"\n                @rename=\"filenameChanged($event)\"\n                @dismisserror=\"dismissError($event)\"\n              />\n            </slot>\n            <slot name=\"file-preview-after\" :file-record=\"element\" :file-data=\"element\" />\n          </component>\n          <template v-if=\"canAddMore && readonly !== true\">\n            <slot name=\"file-preview-new\">\n              <div key=\"new\" class=\"file-preview-wrapper grid-box-item grid-block file-preview-new\">\n                <span class=\"file-preview\">\n                  <span style=\"position: absolute; top: 0; right: 0; bottom: 0; left: 0\">\n                    <VueFileIcon name=\"system-file-preview-new\" />\n                    <span class=\"help-text\">{{ helpTextComputed }}</span>\n                  </span>\n                </span>\n              </div>\n            </slot>\n          </template>\n        </transition-group>\n      </component>\n      <input\n        v-if=\"readonly !== true\"\n        ref=\"fileInput\"\n        title=\"\"\n        :disabled=\"disabled === true || (hasMultiple && !canAddMore)\"\n        type=\"file\"\n        :multiple=\"hasMultiple\"\n        class=\"file-input\"\n        :accept=\"accept || '*'\"\n        :capture=\"capture\"\n        @change=\"filesChanged\"\n      />\n      <slot name=\"after-inner\" />\n    </div>\n    <slot name=\"after-outer\" />\n  </div>\n</template>\n<script lang=\"ts\">\nimport {defineComponent, PropType} from 'vue'\nimport {SlickItem, SlickList} from 'vue-slicksort'\nimport utils from '../lib/utils'\nimport VueFileIcon from './VueFileIcon.vue'\nimport VueFilePreview from './VueFilePreview.vue'\nimport VueFileList from './VueFileList.vue'\nimport VueFileListItem from './VueFileListItem.vue'\nimport {ErrorText, default as FileRecord, RawFileRecord} from '../lib/file-record'\nimport uploader, {CreateFormDataFn} from '../lib/upload-helper'\nimport plugins from '../lib/plugins'\nimport {ConfigureFn} from '../lib/ajax-request'\nimport {Sortable, SortEvent} from '../types'\nimport {FileAgentFile} from '../lib/interfaces'\n\nlet dragCounter = 0\n\nexport default /* #__PURE__ */ defineComponent({\n  name: 'VueFileAgent',\n  components: {\n    VueFileIcon,\n    VueFilePreview,\n    VueFileList,\n    VueFileListItem,\n    SlickList,\n    SlickItem,\n  },\n  directives: {\n    // https://github.com/Jexordexan/vue-slicksort/blob/master/src/HandleDirective.js\n    vfaSortableHandle: {\n      beforeMount(el: HTMLElement) {\n        ;(el as any).sortableHandle = true\n      },\n    },\n  },\n  props: {\n    accept: String,\n    auto: {\n      type: Boolean,\n      required: false,\n      default: undefined,\n    },\n    averageColor: Boolean,\n    capture: {\n      type: String as PropType<boolean | 'user' | 'environment'>,\n      required: false,\n    },\n    compact: Boolean,\n    deletable: Boolean,\n    disabled: Boolean,\n    editable: Boolean,\n    errorText: {\n      type: Object as PropType<ErrorText>,\n      required: false,\n    },\n    helpText: String,\n    linkable: Boolean,\n    maxFiles: Number,\n    maxSize: String,\n    meta: {\n      type: Boolean,\n      default: true,\n    },\n    multiple: Boolean,\n    // progress: any\n    read: Boolean,\n    readonly: Boolean,\n    resumable: Boolean,\n    sortable: {\n      type: [String, Boolean] as PropType<Sortable>,\n    },\n    theme: String,\n    thumbnailSize: Number,\n    uploadConfig: {\n      type: Function as PropType<CreateFormDataFn>,\n      required: false,\n    },\n    uploadHeaders: {\n      type: Object,\n    },\n    uploadUrl: String,\n    uploadWithCredentials: Boolean,\n    rawModelValue: Array<RawFileRecord>,\n  },\n  emits: [\n    'beforedelete',\n    'change',\n    'delete',\n    'drop',\n    'rename',\n    'select',\n    'sort',\n    'upload',\n    'upload:error',\n    'upload:delete',\n    'upload:delete:error',\n    'upload:update',\n    'upload:update:error',\n    'update:modelValue',\n    'update:rawModelValue',\n  ],\n  data() {\n    return {\n      fileRecords: [] as FileRecord[],\n      rawFileRecords: [] as RawFileRecord[],\n      isDragging: false,\n      isSorting: false,\n      isSortingActive: false,\n      transitionDuration: 300,\n      overallProgress: 0,\n      uniqueId: '',\n      sortTimeout: 0,\n    }\n  },\n  computed: {\n    withCredentials(): boolean | undefined {\n      return this.uploadWithCredentials\n    },\n    canAddMore(): boolean {\n      if (!this.hasMultiple) {\n        return this.fileRecords.length === 0\n      }\n      if (!this.maxFiles) {\n        return true\n      }\n      return this.fileRecords.length < this.maxFiles\n    },\n    helpTextComputed(): string {\n      if (this.helpText) {\n        return this.helpText\n      }\n      return `Choose ${this.hasMultiple ? 'files' : 'file'} or drag & drop here`\n    },\n    isDeletable(): boolean {\n      if (typeof this.deletable === 'string') {\n        return this.deletable !== 'false'\n      }\n      return !!this.deletable\n    },\n    isSortable(): boolean {\n      return !!this.sortable\n    },\n    hasMultiple(): boolean {\n      if (typeof this.multiple === 'string') {\n        return this.multiple !== 'false'\n      }\n      if (this.multiple === undefined) {\n        return Array.isArray(this.fileRecords)\n      }\n      return !!this.multiple\n    },\n    shouldRead(): boolean {\n      return this.read\n    },\n    dragOptions() {\n      return {\n        animation: this.transitionDuration,\n        group: this.uniqueId,\n        disabled: this.isSortable,\n        ghostClass: 'ghost',\n      }\n    },\n  },\n  watch: {\n    rawModelValue: {\n      handler() {\n        this.checkValue()\n      },\n      deep: true,\n    },\n  },\n  created() {\n    this.uniqueId = new Date().getTime().toString(36) + Math.random().toString(36).slice(2)\n    this.checkValue()\n  },\n  methods: {\n    createThumbnail(fileRecord: FileRecord, video: HTMLVideoElement): Promise<void> {\n      return new Promise((resolve, reject) => {\n        const canvas = document.createElement('canvas')\n        utils\n          .createVideoThumbnail(\n            video,\n            canvas,\n            fileRecord.thumbnailSize,\n            this.averageColor !== false,\n            this.withCredentials\n          )\n          .then((thumbnail) => {\n            fileRecord.imageColor = thumbnail.color\n            fileRecord.videoThumbnail = thumbnail.url\n            fileRecord.dimensions.width = thumbnail.width\n            fileRecord.dimensions.height = thumbnail.height\n            resolve()\n          }, reject)\n      })\n    },\n    initVideo(fileRecord: FileRecord): void {\n      if (!fileRecord.isPlayableVideo()) {\n        return\n      }\n      const {createObjectURL} = window.URL || window.webkitURL || {}\n      const {revokeObjectURL} = window.URL || window.webkitURL || {}\n      const video = document.createElement('video')\n      video.src = createObjectURL(fileRecord.file)\n      this.createThumbnail(fileRecord, video).then(() => {\n        revokeObjectURL(video.src)\n      })\n      video.load()\n    },\n    getFileRecordOrRawInstance(\n      fileRecordOrRaw: FileRecord | RawFileRecord,\n      raw: boolean\n    ): FileRecord | RawFileRecord {\n      let i\n      if (fileRecordOrRaw instanceof FileRecord) {\n        i = this.fileRecords.indexOf(fileRecordOrRaw)\n      } else {\n        i = this.rawFileRecords.indexOf(fileRecordOrRaw)\n      }\n      if (i === -1) {\n        return fileRecordOrRaw\n      }\n      return raw ? this.rawFileRecords[i] : this.fileRecords[i]\n    },\n    getFileRecordRawInstance(fileRecordOrRaw: FileRecord | RawFileRecord): RawFileRecord {\n      return this.getFileRecordOrRawInstance(fileRecordOrRaw, true) as RawFileRecord\n    },\n    getFileRecordInstance(fileRecordOrRaw: FileRecord | RawFileRecord): FileRecord {\n      return this.getFileRecordOrRawInstance(fileRecordOrRaw, false) as FileRecord\n    },\n    prepareConfigureFn(configureXhr?: ConfigureFn) {\n      const withCredentials = this.uploadWithCredentials\n      if (withCredentials !== true && withCredentials !== false) {\n        return configureXhr\n      }\n      return (request: XMLHttpRequest) => {\n        request.withCredentials = withCredentials\n        if (typeof configureXhr === 'function') {\n          configureXhr(request)\n        }\n      }\n    },\n    upload(\n      url: string,\n      headers: object,\n      fileRecordsOrRaw: FileRecord[] | RawFileRecord[],\n      createFormData?: (fileRecord: FileRecord) => FormData,\n      configureXhr?: ConfigureFn\n    ): Promise<any> {\n      const validFileRecords: FileRecord[] = []\n      const validFilesRawData: RawFileRecord[] = []\n      for (const fileRecordOrRaw of fileRecordsOrRaw) {\n        const fileRecord = this.getFileRecordInstance(fileRecordOrRaw)\n        if (!fileRecord.error) {\n          validFileRecords.push(fileRecord)\n          validFilesRawData.push(this.getFileRecordRawInstance(fileRecord))\n        }\n      }\n      if (this.resumable) {\n        return uploader.tusUpload(\n          plugins.tus,\n          url,\n          headers,\n          validFileRecords,\n          (overallProgress) => {\n            this.overallProgress = overallProgress\n          },\n          this.resumable === true ? undefined : this.resumable,\n          this.uploadWithCredentials\n        )\n      }\n      return new Promise((resolve, reject) => {\n        uploader\n          .upload(\n            url,\n            headers,\n            validFileRecords,\n            createFormData,\n            (overallProgress) => {\n              this.overallProgress = overallProgress\n            },\n            this.prepareConfigureFn(configureXhr)\n          )\n          .then(\n            (res: any) => {\n              for (let i = 0; i < res.length; i++) {\n                res[i].fileRecord = validFilesRawData[i]\n              }\n              this.$emit('upload', res)\n              resolve(res)\n            },\n            (err: any) => {\n              for (let i = 0; i < err.length; i++) {\n                err[i].fileRecord = validFilesRawData[i]\n              }\n              this.$emit('upload:error', err)\n              reject(err)\n            }\n          )\n      })\n    },\n    deleteUpload(\n      url: string,\n      headers: object,\n      fileRecordOrRaw: FileRecord | RawFileRecord,\n      uploadData?: any,\n      configureXhr?: ConfigureFn\n    ): Promise<any> {\n      if (this.fileRecords.length < 1) {\n        this.overallProgress = 0\n      }\n      const fileRecord = this.getFileRecordInstance(fileRecordOrRaw)\n      const rawFileRecord = this.getFileRecordRawInstance(fileRecordOrRaw)\n      if (this.resumable) {\n        return uploader.tusDeleteUpload(plugins.tus, url, headers, fileRecord)\n      }\n      return new Promise((resolve, reject) => {\n        uploader\n          .deleteUpload(\n            url,\n            headers,\n            fileRecord as FileRecord,\n            uploadData,\n            this.prepareConfigureFn(configureXhr)\n          )\n          .then(\n            (res: any) => {\n              res.fileRecord = rawFileRecord\n              this.$emit('upload:delete', res)\n              resolve(res)\n            },\n            (err: any) => {\n              err.fileRecord = rawFileRecord\n              this.$emit('upload:delete:error', err)\n              reject(err)\n            }\n          )\n      })\n    },\n    updateUpload(\n      url: string,\n      headers: object,\n      fileRecord: FileRecord | RawFileRecord,\n      uploadData?: any,\n      configureXhr?: ConfigureFn\n    ): Promise<any> {\n      fileRecord = this.getFileRecordInstance(fileRecord)\n      const rawFileRecord = this.getFileRecordRawInstance(fileRecord)\n      return new Promise((resolve, reject) => {\n        uploader\n          .updateUpload(\n            url,\n            headers,\n            fileRecord as FileRecord,\n            uploadData,\n            this.prepareConfigureFn(configureXhr)\n          )\n          .then(\n            (res: any) => {\n              res.fileRecords = rawFileRecord\n              this.$emit('upload:update', res)\n              resolve(res)\n            },\n            (err) => {\n              err.fileRecords = rawFileRecord\n              this.$emit('upload:update:error', err)\n              reject(err)\n            }\n          )\n      })\n    },\n    autoUpload(fileRecords: FileRecord[]): Promise<any> {\n      if (!this.uploadUrl || this.auto === false) {\n        return Promise.resolve(false)\n      }\n      return this.upload(\n        this.uploadUrl,\n        this.uploadHeaders as object,\n        fileRecords,\n        this.uploadConfig\n      )\n    },\n    autoDeleteUpload(fileRecord: FileRecord | RawFileRecord): Promise<any> {\n      if (!this.uploadUrl || this.auto === false) {\n        return Promise.resolve(false)\n      }\n      return this.deleteUpload(\n        this.uploadUrl,\n        this.uploadHeaders as object,\n        fileRecord,\n        this.uploadConfig\n      )\n    },\n    autoUpdateUpload(fileRecord: FileRecord): Promise<any> {\n      if (!this.uploadUrl || this.auto === false) {\n        return Promise.resolve(false)\n      }\n      return this.updateUpload(\n        this.uploadUrl,\n        this.uploadHeaders as object,\n        fileRecord,\n        this.uploadConfig\n      )\n    },\n    equalFiles(file1: FileAgentFile, file2: FileAgentFile): boolean {\n      return (\n        true &&\n        file1.name === file2.name &&\n        file1.size === file2.size &&\n        file1.type === file2.type &&\n        file1.fullPath === file2.fullPath &&\n        // file1.lastModifiedDate.getTime() === file2.lastModifiedDate.getTime() &&\n        file1.lastModified === file2.lastModified\n      )\n    },\n    isFileAddedAlready(file: FileAgentFile): boolean {\n      for (const fileRecord of this.fileRecords) {\n        if (this.equalFiles(file, fileRecord.file as FileAgentFile)) {\n          return true\n        }\n      }\n      return false\n    },\n    handleFiles(files: File[] | FileList): void {\n      if (this.disabled === true || this.readonly === true) {\n        return\n      }\n      if (this.hasMultiple && !this.canAddMore) {\n        return\n      }\n      const fileRecords: FileRecord[] = []\n      const filesFiltered: File[] = []\n      // tslint:disable-next-line\n      for (let i = 0; i < files.length; i++) {\n        if (this.hasMultiple && this.isFileAddedAlready(files[i] as FileAgentFile)) {\n          continue\n        }\n        // skip hidden/system files\n        if (!files[i].name.startsWith('.')) {\n          filesFiltered.push(files[i])\n        }\n      }\n      files = filesFiltered\n      if (\n        this.hasMultiple &&\n        this.maxFiles &&\n        files.length > this.maxFiles - this.fileRecords.length\n      ) {\n        files = files.slice(0, this.maxFiles - this.fileRecords.length)\n      }\n      for (const file of files) {\n        fileRecords.push(\n          new FileRecord(\n            {\n              file,\n            } as RawFileRecord,\n            {\n              read: this.shouldRead,\n              maxSize: this.maxSize,\n              accept: this.accept,\n              thumbnailSize: this.thumbnailSize,\n              averageColor: this.averageColor,\n              withCredentials: this.withCredentials,\n            }\n          )\n        )\n      }\n\n      for (const fileRecord of fileRecords) {\n        if (fileRecord.file.size <= 20 * 1024 * 1024) {\n          // <= 20MB\n          this.initVideo(fileRecord)\n        }\n      }\n      if (this.hasMultiple) {\n        // splice: for list transitions to work properly\n        this.fileRecords.splice(this.fileRecords.length, 0, ...fileRecords)\n      } else {\n        this.fileRecords = fileRecords\n      }\n\n      FileRecord.readFiles(fileRecords).then((fileRecordsNew: FileRecord[]) => {\n        const allFileRecordsRaw = FileRecord.toRawArray(this.fileRecords)\n        this.rawFileRecords = allFileRecordsRaw\n\n        this.$emit('update:rawModelValue', this.rawFileRecords)\n        this.$emit('select', fileRecordsNew)\n      })\n      this.autoUpload(fileRecords)\n    },\n    filesChanged(event: Event): void {\n      let files: File[] | FileList = (event.target as HTMLInputElement).files as FileList\n      this.$emit('change', event)\n      if (!files[0]) {\n        return\n      }\n      if (!this.hasMultiple) {\n        files = [files[0]]\n      }\n      this.handleFiles(files)\n      if (this.$refs.fileInput) {\n        ;(this.$refs.fileInput as any).value = null // do not use ''\n        // because chrome won't fire change event for same file\n      }\n    },\n    drop(event: DragEvent): void {\n      event.stopPropagation()\n      event.preventDefault()\n      dragCounter = 0\n      this.isDragging = false\n      if (this.disabled === true || this.readonly === true) {\n        return\n      }\n      if (!event.dataTransfer) {\n        return\n      }\n      utils.getFilesFromDroppedItems(event.dataTransfer).then((files) => {\n        this.$emit('drop', event)\n        if (!files || !files[0]) {\n          return\n        }\n        if (!this.hasMultiple) {\n          files = [files[0]] as FileAgentFile[]\n        }\n        this.handleFiles(files)\n      })\n    },\n    dragEnter(event: DragEvent): void {\n      if (!event.dataTransfer) {\n        return\n      }\n      this.isDragging = true\n      event.stopPropagation()\n      event.preventDefault()\n      dragCounter++\n      event.dataTransfer.dropEffect = 'copy' // Explicitly show this is a copy.\n    },\n    dragOver(event: DragEvent): void {\n      if (!event.dataTransfer) {\n        return\n      }\n      this.isDragging = true\n      event.stopPropagation()\n      event.preventDefault()\n      event.dataTransfer.dropEffect = 'copy' // Explicitly show this is a copy.\n    },\n    dragLeave(event: DragEvent): void {\n      if (!event.dataTransfer) {\n        return\n      }\n      dragCounter--\n      if (dragCounter === 0) {\n        this.isDragging = false\n      }\n    },\n    removeFileRecord(fileRecord: FileRecord): void {\n      this.$emit('beforedelete', fileRecord)\n\n      if (!this.uploadUrl || this.auto === false) {\n        const i = this.fileRecords.indexOf(fileRecord)\n\n        if (i !== -1) {\n          this.fileRecords.splice(i, 1)[0]\n          this.rawFileRecords.splice(i, 1)[0]\n          this.$emit('update:rawModelValue', this.rawFileRecords)\n        }\n\n        return\n      }\n      this.deleteFileRecord(fileRecord)\n    },\n    dismissError(fileRecord: FileRecord): void {\n      const i = this.fileRecords.indexOf(fileRecord)\n\n      if (i !== -1) {\n        this.fileRecords[i].error = false\n        this.rawFileRecords[i].error = false\n        this.$emit('update:rawModelValue', this.rawFileRecords)\n      }\n    },\n    deleteFileRecord(fileRecordOrRaw: FileRecord): void {\n      const i = this.fileRecords.indexOf(fileRecordOrRaw)\n      let fileRecord = this.fileRecords[i]\n      let rawFileRecord = this.rawFileRecords[i]\n\n      this.$emit('update:rawModelValue', this.rawFileRecords)\n      this.$emit('delete', fileRecord)\n\n      fileRecord = this.fileRecords.splice(i, 1)[0]\n      rawFileRecord = this.rawFileRecords.splice(i, 1)[0]\n\n      this.autoDeleteUpload(fileRecord).then(\n        () => {\n          /* no op */\n        },\n        () => {\n          this.fileRecords.splice(i, 0, fileRecord)\n          this.rawFileRecords.splice(i, 0, rawFileRecord)\n        }\n      )\n    },\n    filenameChanged(fileRecord: FileRecord): void {\n      const i = this.fileRecords.indexOf(fileRecord)\n      this.fileRecords[i] = fileRecord\n      this.rawFileRecords[i] = fileRecord.toRaw()\n\n      this.$emit('update:rawModelValue', this.rawFileRecords)\n      this.$emit('rename', fileRecord)\n\n      this.autoUpdateUpload(fileRecord).then(\n        () => {\n          /* no op */\n        },\n        () => {\n          fileRecord.customName = fileRecord.oldCustomName\n          this.rawFileRecords[i] = fileRecord.toRaw()\n\n          this.$emit('update:rawModelValue', this.rawFileRecords)\n        }\n      )\n    },\n    checkValue(): void {\n      if (this.rawFileRecords === this.rawModelValue) {\n        this.$emit('update:modelValue', this.fileRecords)\n        return\n      }\n\n      let rawFileRecords: RawFileRecord[] = this.rawModelValue || []\n      rawFileRecords = Array.isArray(rawFileRecords) ? rawFileRecords : [rawFileRecords]\n\n      const fdPromises: Array<Promise<FileRecord>> = []\n      const rawFileRecordsNew: RawFileRecord[] = []\n\n      for (let i = 0; i < rawFileRecords.length; i++) {\n        const existingIndex = this.rawFileRecords.indexOf(rawFileRecords[i])\n        if (existingIndex !== -1) {\n          fdPromises.push(\n            FileRecord.fromRaw(rawFileRecords[i], {\n              read: this.shouldRead,\n              maxSize: this.maxSize,\n              accept: this.accept,\n              thumbnailSize: this.thumbnailSize,\n              averageColor: this.averageColor,\n              withCredentials: this.withCredentials,\n            })\n          )\n          rawFileRecordsNew[i] = this.rawFileRecords[existingIndex]\n        } else {\n          fdPromises.push(\n            FileRecord.fromRaw(rawFileRecords[i], {\n              read: this.shouldRead,\n              maxSize: this.maxSize,\n              accept: this.accept,\n              thumbnailSize: this.thumbnailSize,\n              averageColor: this.averageColor,\n              withCredentials: this.withCredentials,\n            })\n          )\n          rawFileRecordsNew.push(rawFileRecords[i])\n        }\n      }\n\n      this.rawFileRecords = rawFileRecordsNew\n      Promise.all(fdPromises).then((fileRecords) => {\n        this.fileRecords = fileRecords\n\n        this.$emit('update:modelValue', this.fileRecords)\n        this.$emit('update:rawModelValue', this.rawFileRecords)\n      })\n    },\n    sortStart(): void {\n      if (this.sortTimeout) {\n        window.clearTimeout(this.sortTimeout)\n      }\n      this.isSorting = true\n      this.isSortingActive = true\n    },\n    sortEnd(sortData: SortEvent): void {\n      this.isSortingActive = false\n      if (this.sortTimeout) {\n        clearTimeout(this.sortTimeout)\n      }\n      this.sortTimeout = window.setTimeout(() => {\n        this.isSorting = false\n      }, this.transitionDuration + 100)\n      this.sort(sortData.oldIndex, sortData.newIndex)\n    },\n    sort(from: number, to: number) {\n      if (from !== to) {\n        const rawFileRecords = utils.arrayMove(this.rawFileRecords, from, to)\n        this.$nextTick(() => {\n          this.$emit('update:rawModelValue', rawFileRecords)\n          this.$emit(\n            'sort',\n            {\n              oldIndex: from,\n              newIndex: to,\n            },\n            rawFileRecords\n          )\n        })\n      }\n    },\n  },\n})\n</script>\n<style lang=\"scss\">\n@import '../scss/vue-file-agent.scss';\n</style>\n","import VueFileIcon from './VueFileIcon.vue';\nimport VueFilePreview from './VueFilePreview.vue';\nimport VueFileList from './VueFileList.vue';\nimport VueFileListItem from './VueFileListItem.vue';\nimport VueFileAgent from './VueFileAgent.vue';\n\nexport default {\n  VueFileIcon,\n  VueFilePreview,\n  VueFileList,\n  VueFileListItem,\n  VueFileAgent,\n}\n","import {App, Plugin} from 'vue'\nimport Components from './components'\nimport './scss/vue-file-agent.scss'\n\n// All available components\n// Keep this list in sync with /components/index.ts please\nimport VueFileIcon from './components/VueFileIcon.vue'\nimport VueFilePreview from './components/VueFilePreview.vue'\nimport VueFileList from './components/VueFileList.vue'\nimport VueFileListItem from './components/VueFileListItem.vue'\nimport VueFileAgent from './components/VueFileAgent.vue'\n\n// Export available utils\nexport {default as plugins} from './lib/plugins'\n\n// Export components\nexport {VueFileIcon, VueFilePreview, VueFileList, VueFileListItem, VueFileAgent}\n\n// Export types\nexport type {Sortable, SortEvent} from './types'\nexport type {RawFileRecord} from './lib/file-record'\n\n// Export common stuff\nexport type {default as FileRecord} from './lib/file-record'\n\n// Inject all components into the global @vue/runtime-core\n// This allows intellisense in templates w/out direct importing\ndeclare module '@vue/runtime-core' {\n  export interface GlobalComponents {\n    VueFileIcon: typeof VueFileIcon\n    VueFilePreview: typeof VueFilePreview\n    VueFileList: typeof VueFileList\n    VueFileListItem: typeof VueFileListItem\n    VueFileAgent: typeof VueFileAgent\n  }\n}\n\n// Main app plugin\nconst plugin: Plugin = {\n  install(app: App) {\n    Object.entries(Components).forEach(([name, component]) => {\n      app.component(name, component)\n    })\n  },\n}\n\nexport {plugin as VueFileAgentNext}\nexport default plugin\n"],"names":["c","SvgIcon","paths","color","viewBox","__publicField","playIconPaths","icons","category","extensionsMap","cat","extensions","ext","getIconByName","name","getIconFromExt","_sfc_main$4","defineComponent","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_Fragment","_renderList","_ctx","d","index","getFilesFromDroppedItems","dataTransfer","resolve","includesFolder","files","folderReadQueue","i","item","fileSystemEntries","getEntries","file","filesInFolders","entry","directory","entryReader","readEntries","entries","iterateEntry","entryFiles","entryFile","transfer","Utils","arr","previousIndex","newIndex","array","k","arrLength","step","len","preparedStep","redTotal","greenTotal","blueTotal","alphaTotal","count","alpha","red","green","blue","video","canvas","thumbnailSize","calculateAverageColor","withCredentials","reject","loadedmetadata","loadeddata","tryGetThumbnail","context","imageData","url","reader","event","buffer","view","length","offset","marker","little","tags","srcOrientation","ctx","width","height","image","widthLimit","heightLimit","orientation","avgColor","rgba","resized","createObjectURL","revokeObjectURL","shouldRevoke","orientationPromise","dataUrl","bytes","sizes","size","matches","text","value","h","s","l","hash","accept","acceptedFiles","mimeType","baseMimeType","validType","maxSize","utils","_sfc_main$3","VueFileIcon","fileRecord","thumbnail","wrapper","player","oldFilenameWithoutExt","timeout","completed","_hoisted_1","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_12","_hoisted_14","_hoisted_15","_resolveComponent","_normalizeClass","_createElementVNode","$event","_createVNode","_component_VueFileIcon","_createCommentVNode","_hoisted_6","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_17","_hoisted_18","_createBlock","_sfc_main$2","_sfc_render","_sfc_main$1","ElementMixin","isDisabled","disabled","node","Manager","ref","_a","_b","a","b","isTouch","hasOwnProperty","obj","prop","arrayMove","arrayRemove","arrayInsert","events","closest","el","fn","limit","min","max","getCSSPixelValue","stringValue","getElementMargin","element","style","getPointerOffset","reference","x","y","offsetParents","nodes","commonOffsetParent","node1","node2","parents1","parents2","getEdgeOffset","container","nodeOffset","cloneNode","fields","clonedNode","field","getLockPixelOffsets","lockOffset","minLockOffset","maxLockOffset","getLockPixelOffset","offsetX","offsetY","unit","match","resetTransform","setTransform","transform","duration","ContainerMixin","useHub","key","eventName","distance","shouldCancelStart","target","useDragHandle","pressThreshold","delta","active","getHelperDimensions","helperClass","hideSortableGhost","appendTo","margin","containerBoundingRect","dimensions","payload","removed","newValue","clientRect","useWindowAsScrollContainer","_window","sortableGhost","helper","helperBoundingRect","ghostRect","onEnd","cb","indexNode","targetX","targetY","scrollDifference","dest","destIndex","destRefs","destNode","ancestor","sourceOffset","targetOffset","newIndexNode","deltaScroll","cleanup","cleanupTimer","lockAxis","lockToContainerEdges","translate","minOffset","maxOffset","transitionDuration","sortingOffset","edgeOffset","nextNode","prevNode","direction","speed","acceleration","SlickItem","SlickList","FileRecord","data","options","rawFileRecord","isSync","promise","rawFileRecords","promises","fileRecords","err","withoutExt","rgb","darkPoint","svgIcon","errorText","error","raw","validSize","AjaxRequest","message","code","request","response","validateStatus","status","method","formData","configureFn","loadEvent","responseHeaders","responseData","contentType","ajax","UploadHelper","xhr","headers","progressCallback","uploadData","createFormData","progressFn","updateOverallProgress","prgTotal","failedUploadsCount","progressEvent","percentCompleted","responses","result","tus","tusOptionsFn","uploadWithCredentials","tusOptions","upload","bytesUploaded","bytesTotal","req","abort","shouldTerminate","res","rej","uploader","plugins","dragCounter","_sfc_main","VueFilePreview","VueFileList","VueFileListItem","fileRecordOrRaw","configureXhr","fileRecordsOrRaw","validFileRecords","validFilesRawData","overallProgress","file1","file2","filesFiltered","fileRecordsNew","allFileRecordsRaw","fdPromises","rawFileRecordsNew","existingIndex","sortData","from","to","_hoisted_2","_hoisted_3","_hoisted_4","args","_renderSlot","_normalizeStyle","_resolveDynamicComponent","_withCtx","_TransitionGroup","_component_VueFilePreview","Components","VueFileAgent","plugin","app","component"],"mappings":"ubAAA,MAAMA,EAAI,CACR,MAAS,CACP,MACA,MACA,MACA,OAEA,MAGA,MACA,KACF,EACA,iBAAkB,CAAC,MAAO,MAAO,KAAK,EACtC,QAAW,CAAC,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,SAAU,IAAK,KAAK,EACzE,KAAQ,CAEN,MACA,MACA,QACA,KACF,EACA,SAAY,CACV,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,KAEF,EACA,WAAc,CAAC,MAAO,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,SAAU,MAAO,KAAM,MAAO,KAAK,EAClG,KAAQ,CAAC,MAAO,MAAO,MAAO,KAAK,EACnC,MAAS,CAAC,KAAM,MAAO,MAAO,MAAO,OAAQ,MAAO,MAAO,KAAM,MAAO,MAAO,MAAO,MAAM,EAC5F,OAAU,CACR,MACA,OACA,MACA,MACA,MACA,KACA,MACA,OACA,MACA,OACA,MAEA,OACA,MACA,KACA,MACA,MACA,OACF,EACA,aAAgB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAM,EACnD,OAAU,CAAC,IAAK,QAAS,MAAO,KAAM,IAAK,OAAQ,KAAM,OAAQ,KAAM,QAAS,IAAI,EACpF,MAAS,CAAC,MAAO,MAAO,MAAO,MAAM,EACrC,OAAU,CACR,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEA,MACA,MACA,MACA,MACA,KACF,EACA,MAAS,CACP,MACA,MACA,MACA,MACA,OAEA,MAGA,MACA,OACA,KACA,MACA,MAEA,KACF,EACA,iBAAkB,CAAC,MAAO,OAAQ,KAAK,EACvC,IAAO,CAAC,KAAK,EACb,IAAO,CACL,MACA,OACA,MACA,MACA,MAEA,MACA,MACA,KACF,EACA,KAAQ,CAAC,KAAK,EACd,MAAS,CAAC,MAAM,EAChB,IAAO,CAAC,KAAK,EACb,OAAU,CAAC,QAAQ,EACnB,KAAQ,CAAC,MAAM,CACjB,EC/GO,MAAMC,CAAQ,CAEnB,YAAmBC,EAAwBC,EAAuBC,EAAkB,CAD7EC,EAAA,gBAAmB,IACP,KAAA,MAAAH,EAAwB,KAAA,MAAAC,EAAuB,KAAA,QAAAC,CAAmB,CACvF,CAEA,MAAME,EAAgB,CAAC,0FAA0F,EAE3GC,EAAQ,CACZ,OAAU,IAAIN,EACZ,CACE,yEACA,kGACF,EACA,SACF,EACA,MAAS,IAAIA,EACX,CACE,wKAEA,oHACF,EACA,MACF,EACA,MAAS,IAAIA,EACX,CACE,8QACF,EACA,SACF,EACA,iBAAkB,IAAIA,EAAQK,EAAe,OAAQ,WAAW,EAChE,iBAAkB,IAAIL,EAAQK,EAAe,UAAW,WAAW,EACnE,QAAW,IAAIL,EACb,CACE,6dACF,EACA,SACF,EACA,OAAU,IAAIA,EACZ,CACE,s7BACF,EACA,MACF,EACA,MAAS,IAAIA,EACX,CACE,iFACA,uDACF,EACA,SACF,EACA,IAAO,IAAIA,EACT,CACE,sQACA,mHACF,EACA,SACF,EACA,WAAc,IAAIA,EAChB,CAAC,iFAAiF,EAClF,MACF,EACA,MAAS,IAAIA,EACX,CACE,gzBACF,EACA,MACF,EACA,OAAU,IAAIA,EACZ,CACE,yJACF,CACF,EACA,OAAU,IAAIA,EACZ,CACE,6XACF,CACF,EACA,KAAQ,IAAIA,EACV,CACE,gJACA,qdACF,EACA,MACF,EACA,KAAQ,IAAIA,EACV,CAAC,iGAAiG,EAClG,SACF,EACA,SAAY,IAAIA,EACd,CACE,8TACA,mXACA,6QACF,EACA,SACF,EACA,IAAO,IAAIA,EACT,CACE,oxBACF,EACA,SACF,EACA,MAAS,IAAIA,EACX,CACE,2MACF,EACA,SACF,EACA,aAAgB,IAAIA,EAClB,CACE,inBACA,2bACF,EACA,SACF,EACA,KAAQ,IAAIA,EACV,CACE,0TACA,omBACF,EACA,SACF,EACA,IAAO,IAAIA,EACT,CACE,kPACF,EACA,SACF,EACA,MAAS,IAAIA,EACX,CACE,qNACF,CACF,EAEA,eAAgB,IAAIA,EAClB,CAAC,uGAAuG,EACxG,OACA,WACF,EACA,0BAA2B,IAAIA,EAC7B,CACE,meACF,EACA,OACA,eACF,EAEA,yBAA0B,IAAIA,EAAQ,CAAC,+CAA+C,EAAG,OAAW,WAAW,EAC/G,sBAAuB,IAAIA,EACzB,CAAC,0FAA0F,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"}